<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CGSOL - Sistema de Monitoramento</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .rag-verde {
      background-color: #16a34a;
    }

    .rag-amarelo {
      background-color: #f59e0b;
    }

    .rag-vermelho {
      background-color: #dc2626;
    }

    .status-concluido {
      background-color: #2563eb;
    }

    .project-card {
      transition: all 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, .15);
    }

    .slider {
      -webkit-appearance: none;
      appearance: none;
      background: linear-gradient(to right, #3b82f6 0%, #3b82f6 0%, #e5e7eb 0%, #e5e7eb 100%);
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      height: 20px;
      width: 20px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .2);
    }

    .slider::-moz-range-thumb {
      height: 20px;
      width: 20px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .2);
    }
  </style>
</head>

<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-blue-900 text-white shadow-lg">
    <div class="container mx-auto px-4 py-4">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold">CGSOL</h1>
          <p class="text-blue-200 text-sm">Coordena√ß√£o Geral de Solu√ß√µes</p>
        </div>
        <div class="flex items-center space-x-4">
          <select id="userRole" class="bg-blue-800 text-white px-3 py-2 rounded border border-blue-700">
            <option value="coordenacao">Coordena√ß√£o Geral</option>
            <option value="gestor">Gestor de Subcoordena√ß√£o</option>
            <option value="stakeholder">Stakeholder Leitura</option>
          </select>
          <span class="text-blue-200">üë§ Admin</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="bg-white shadow-sm border-b">
    <div class="container mx-auto px-4">
      <div class="flex space-x-8">
        <!-- ‚úÖ PASSANDO this para showPage -->
        <button onclick="showPage('home', this)"
          class="nav-btn py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium">
          üè† Vis√£o CGSOL
        </button>
        <button onclick="showPage('codes', this)"
          class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
          üíª CODES
        </button>
        <button onclick="showPage('coset', this)"
          class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
          üèóÔ∏è COSET
        </button>
        <button onclick="showPage('cgod', this)"
          class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
          üìä CGOD
        </button>
        <button onclick="showPage('pdti', this)"
          class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
          üìã PDTI
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6">
    <!-- Home Page -->
    <div id="homePage" class="page-content">
      <div class="mb-8">
        <div class="flex justify-between items-center">
          <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-1">Dashboard CGSOL</h2>
            <p class="text-gray-600">Vis√£o consolidada das tr√™s subcoordena√ß√µes</p>
          </div>
          <div class="text-right">
            <p class="text-sm text-gray-500">√öltima atualiza√ß√£o</p>
            <p class="text-sm font-medium text-gray-700" id="lastUpdate"></p>
          </div>
        </div>
      </div>

      <!-- KPIs Cards -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-blue-100 text-blue-600">üìã</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Total de Projetos</p>
              <p class="text-2xl font-bold text-gray-900" id="totalProjetos">7</p>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="showPage('codes', document.querySelector('nav .nav-btn:nth-child(2)'))">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-green-100 text-green-600">üíª</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">CODES</p>
              <p class="text-2xl font-bold text-gray-900" id="projetosCodes">3</p>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="showPage('coset', document.querySelector('nav .nav-btn:nth-child(3)'))">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-purple-100 text-purple-600">üèóÔ∏è</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">COSET</p>
              <p class="text-2xl font-bold text-gray-900" id="projetosCoset">2</p>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="showPage('cgod', document.querySelector('nav .nav-btn:nth-child(4)'))">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-orange-100 text-orange-600">üìä</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">CGOD</p>
              <p class="text-2xl font-bold text-gray-900" id="projetosCgod">2</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts Row -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Projetos por Coordena√ß√£o</h3>
          <div class="h-64 flex items-center justify-center">
            <canvas id="coordenacaoChart" class="max-h-48"></canvas>
          </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Status dos Projetos</h3>
          <div class="h-64 flex items-center justify-center">
            <canvas id="statusChart" class="max-h-48"></canvas>
          </div>
        </div>
      </div>

      <!-- Cards por Coordena√ß√£o -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Detalhamento por Coordena√ß√£o</h3>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- CODES -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center mb-4">
              <div class="p-2 rounded-lg bg-blue-100 text-blue-600 mr-3">üíª</div>
              <h4 class="text-lg font-semibold text-gray-800">CODES</h4>
            </div>
            <div class="space-y-3">
              <div
                class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"
                onclick="filterProjects('codes', 'desenvolvimento')">
                <div>
                  <p class="font-medium text-gray-900">Em Desenvolvimento</p>
                  <p class="text-xs text-gray-600">Projetos ativos</p>
                </div>
                <span class="text-lg font-bold text-blue-600">2</span>
              </div>
              <div
                class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"
                onclick="filterProjects('codes', 'sustentacao')">
                <div>
                  <p class="font-medium text-gray-900">Em Sustenta√ß√£o</p>
                  <p class="text-xs text-gray-600">Sistemas em produ√ß√£o</p>
                </div>
                <span class="text-lg font-bold text-yellow-600">1</span>
              </div>
            </div>
          </div>

          <!-- COSET -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center mb-4">
              <div class="p-2 rounded-lg bg-purple-100 text-purple-600 mr-3">üèóÔ∏è</div>
              <h4 class="text-lg font-semibold text-gray-800">COSET</h4>
            </div>
            <div class="space-y-3">
              <div
                class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"
                onclick="filterProjects('coset', 'infraestrutura')">
                <div>
                  <p class="font-medium text-gray-900">Infraestrutura</p>
                  <p class="text-xs text-gray-600">Sistemas estruturantes</p>
                </div>
                <span class="text-lg font-bold text-purple-600">1</span>
              </div>
              <div
                class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"
                onclick="filterProjects('coset', 'integracao')">
                <div>
                  <p class="font-medium text-gray-900">Integra√ß√£o</p>
                  <p class="text-xs text-gray-600">Conectividade entre sistemas</p>
                </div>
                <span class="text-lg font-bold text-green-600">1</span>
              </div>
            </div>
          </div>

          <!-- CGOD -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center mb-4">
              <div class="p-2 rounded-lg bg-orange-100 text-orange-600 mr-3">üìä</div>
              <h4 class="text-lg font-semibold text-gray-800">CGOD</h4>
            </div>
            <div class="space-y-3">
              <div
                class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"
                onclick="filterProjects('cgod', 'analytics')">
                <div>
                  <p class="font-medium text-gray-900">Analytics</p>
                  <p class="text-xs text-gray-600">Dashboards e relat√≥rios</p>
                </div>
                <span class="text-lg font-bold text-orange-600">1</span>
              </div>
              <div
                class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"
                onclick="filterProjects('cgod', 'datalake')">
                <div>
                  <p class="font-medium text-gray-900">Data Lake</p>
                  <p class="text-xs text-gray-600">Cat√°logos e metadados</p>
                </div>
                <span class="text-lg font-bold text-blue-600">1</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Projects Table -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Projetos Recentes</h3>
          <button onclick="exportData('csv')"
            class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">üìä Exportar CSV</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full table-auto">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Projeto</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Coordena√ß√£o
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Respons√°vel
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="projectsTableBody" class="bg-white divide-y divide-gray-200">
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Portal de Servi√ßos</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900">COSET</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-amarelo">Amarelo</span></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Maria Silva</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P001')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P001')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Plataforma BIVBOT</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900">CODES</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Jo√£o Souza</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P002')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P002')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- CODES Page -->
    <div id="codesPage" class="page-content hidden">
      <div class="mb-6">
        <div class="flex justify-between items-center">
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">CODES</h2>
            <p class="text-gray-600">Coordena√ß√£o de Desenvolvimento e Arquitetura de Solu√ß√µes</p>
          </div>
          <button onclick="showModal('projectModal')"
            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">‚ûï Novo Projeto</button>
        </div>
      </div>

      <!-- KPIs CODES -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('codes', 'ativos')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-blue-100 text-blue-600">üöÄ</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Projetos Ativos</p>
              <p class="text-2xl font-bold text-gray-900">3</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('codes', 'desenvolvimento')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-green-100 text-green-600">üíª</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Desenvolvimento</p>
              <p class="text-2xl font-bold text-gray-900">2</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('codes', 'sustentacao')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">üîß</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Sustenta√ß√£o</p>
              <p class="text-2xl font-bold text-gray-900">1</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('codes', 'fora-prazo')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-red-100 text-red-600">‚è∞</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Fora de Prazo</p>
              <p class="text-2xl font-bold text-gray-900">1</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <select class="border border-gray-300 rounded-lg px-3 py-2">
            <option>Todos os Status</option>
            <option>Planejado</option>
            <option>Em Andamento</option>
            <option>Em Risco</option>
            <option>Conclu√≠do</option>
            <option>Pausado</option>
          </select>
          <select class="border border-gray-300 rounded-lg px-3 py-2">
            <option>Todos os Respons√°veis</option>
            <option>Jo√£o Souza</option>
            <option>Carlos Santos</option>
          </select>
          <input type="date" class="border border-gray-300 rounded-lg px-3 py-2">
          <button class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg">üîç Filtrar</button>
        </div>
      </div>

      <!-- Export Button -->
      <div class="flex justify-end items-center mb-6">
        <button onclick="exportData('pdf')"
          class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm">üìÑ Exportar PDF</button>
      </div>

      <!-- Table View -->
      <div id="tableView" class="bg-white rounded-lg shadow-md">
        <div class="overflow-x-auto">
          <table class="min-w-full table-auto">
            <thead class="bg-gray-50">
              <tr>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                  onclick="sortTable('nome')">Projeto ‚ÜïÔ∏è</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progresso
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sprints</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Respons√°vel
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="codesTableBody" class="bg-white divide-y divide-gray-200">
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Plataforma BIVBOT</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 92%"></div>
                    </div>
                    <span class="text-sm text-gray-900">92%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span
                    class="font-medium text-blue-600">21</span> de <span class="text-gray-600">30</span></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Jo√£o Souza</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P002')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P002')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Sistema de Monitoramento</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Em
                    Risco</span></td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-vermelho">Vermelho</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 66%"></div>
                    </div>
                    <span class="text-sm text-gray-900">66%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span
                    class="font-medium text-blue-600">8</span> de <span class="text-gray-600">15</span></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Carlos Santos</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P004')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P004')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">API Gateway</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Sustenta√ß√£o</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div>
                    </div>
                    <span class="text-sm text-gray-900">100%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span
                    class="font-medium text-blue-600">12</span> de <span class="text-gray-600">12</span></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ana Costa</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P006')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P006')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- COSET Page -->
    <div id="cosetPage" class="page-content hidden">
      <div class="mb-6">
        <div class="flex justify-between items-center">
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">COSET</h2>
            <p class="text-gray-600">Coordena√ß√£o de Sistemas Estruturantes</p>
          </div>
          <button onclick="showModal('projectModal')"
            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">‚ûï Novo Projeto</button>
        </div>
      </div>

      <!-- KPIs COSET -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('coset', 'sistemas-integrados')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-blue-100 text-blue-600">üîó</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Sistemas Integrados</p>
              <p class="text-2xl font-bold text-gray-900">2</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('coset', 'modernizacao')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-green-100 text-green-600">üîÑ</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Moderniza√ß√£o</p>
              <p class="text-2xl font-bold text-gray-900">1</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('coset', 'infraestrutura')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-purple-100 text-purple-600">üèóÔ∏è</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Infraestrutura</p>
              <p class="text-2xl font-bold text-gray-900">1</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('coset', 'compliance')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-orange-100 text-orange-600">‚úÖ</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Compliance</p>
              <p class="text-2xl font-bold text-gray-900">0</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Projetos COSET</h3>
        <div class="overflow-x-auto">
          <table class="min-w-full table-auto">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Projeto</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progresso
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Respons√°vel
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Portal de Servi√ßos</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-amarelo">Amarelo</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 75%"></div>
                    </div>
                    <span class="text-sm text-gray-900">75%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Maria Silva</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P001')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P001')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Sistema ERP</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Sustenta√ß√£o</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div>
                    </div>
                    <span class="text-sm text-gray-900">100%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Pedro Lima</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P007')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P007')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- PDTI Page -->
    <div id="pdtiPage" class="page-content hidden">
      <div class="mb-6">
        <div class="flex justify-between items-center">
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">PDTI - Plano Diretor de Tecnologia da Informa√ß√£o</h2>
            <p class="text-gray-600">Monitoramento das a√ß√µes de Solu√ß√µes Digitais</p>
          </div>
          <div class="flex space-x-3">
            <button onclick="exportPDTI('excel')"
              class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">üìä Exportar Excel</button>
            <button onclick="showModal('pdtiActionModal')"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">‚ûï Nova A√ß√£o</button>
          </div>
        </div>
      </div>

      <!-- KPIs PDTI -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-blue-100 text-blue-600">üìã</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Total de A√ß√µes</p>
              <p class="text-2xl font-bold text-gray-900" id="totalAcoes">77</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-green-100 text-green-600">‚úÖ</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Conclu√≠das</p>
              <p class="text-2xl font-bold text-gray-900" id="acoesConcluidas">19</p>
              <p class="text-xs text-green-600 font-medium">25%</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">üîÑ</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Em Andamento</p>
              <p class="text-2xl font-bold text-gray-900" id="acoesAndamento">16</p>
              <p class="text-xs text-yellow-600 font-medium">21%</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-red-100 text-red-600">‚è∏Ô∏è</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">N√£o Iniciadas</p>
              <p class="text-2xl font-bold text-gray-900" id="acoesNaoIniciadas">42</p>
              <p class="text-xs text-red-600 font-medium">54%</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Progress Chart -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Progresso Geral do PDTI</h3>
        <div class="w-full bg-gray-200 rounded-full h-6 mb-4">
          <div
            class="bg-gradient-to-r from-green-500 to-blue-500 h-6 rounded-full flex items-center justify-center text-white text-sm font-medium"
            style="width: 25%">25% Conclu√≠do</div>
        </div>
        <div class="grid grid-cols-3 gap-4 text-center">
          <div>
            <p class="text-2xl font-bold text-green-600">19</p>
            <p class="text-sm text-gray-600">Conclu√≠das</p>
          </div>
          <div>
            <p class="text-2xl font-bold text-yellow-600">16</p>
            <p class="text-sm text-gray-600">Em Andamento</p>
          </div>
          <div>
            <p class="text-2xl font-bold text-red-600">42</p>
            <p class="text-sm text-gray-600">N√£o Iniciadas</p>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <select id="pdtiStatusFilter" class="border border-gray-300 rounded-lg px-3 py-2" onchange="filterPDTI()">
            <option value="">Todas as Situa√ß√µes</option>
            <option value="Conclu√≠da">Conclu√≠da</option>
            <option value="Em andamento">Em Andamento</option>
            <option value="N√£o iniciada">N√£o Iniciada</option>
            <option value="-">Sem Status</option>
          </select>
          <select id="pdtiTipoFilter" class="border border-gray-300 rounded-lg px-3 py-2" onchange="filterPDTI()">
            <option value="">Todos os Tipos</option>
            <option value="SDF">Solu√ß√µes Digitais (SDF)</option>
            <option value="SDD">Solu√ß√µes de Dados (SDD)</option>
            <option value="SDS">Solu√ß√µes de Sistemas (SDS)</option>
          </select>
          <input type="text" id="pdtiSearchFilter" placeholder="Buscar por descri√ß√£o..."
            class="border border-gray-300 rounded-lg px-3 py-2" onkeyup="filterPDTI()">
          <button onclick="clearPDTIFilters()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg">üîÑ
            Limpar Filtros</button>
        </div>
      </div>

      <!-- PDTI Actions Table -->
      <div class="bg-white rounded-lg shadow-md">
        <div class="p-6 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-gray-800">A√ß√µes do PDTI - Solu√ß√µes Digitais</h3>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full table-auto">
            <thead class="bg-gray-50">
              <tr>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                  onclick="sortPDTI('id')">ID A√á√ÉO ‚ÜïÔ∏è</th>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                  onclick="sortPDTI('descricao')">DESCRI√á√ÉO ‚ÜïÔ∏è</th>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                  onclick="sortPDTI('situacao')">SITUA√á√ÉO ‚ÜïÔ∏è</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TIPO</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√á√ïES</th>
              </tr>
            </thead>
            <tbody id="pdtiTableBody" class="bg-white divide-y divide-gray-200"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- CGOD Page -->
    <div id="cgodPage" class="page-content hidden">
      <div class="mb-6">
        <div class="flex justify-between items-center">
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">CGOD</h2>
            <p class="text-gray-600">Coordena√ß√£o de Governan√ßa de Dados</p>
          </div>
          <button onclick="showModal('projectModal')"
            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">‚ûï Novo Projeto</button>
        </div>
      </div>

      <!-- KPIs CGOD -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('cgod', 'catalogos')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-blue-100 text-blue-600">üìö</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Cat√°logos de Dados</p>
              <p class="text-2xl font-bold text-gray-900">1</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('cgod', 'analytics')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-green-100 text-green-600">üìä</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Analytics & BI</p>
              <p class="text-2xl font-bold text-gray-900">1</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('cgod', 'qualidade')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-purple-100 text-purple-600">üéØ</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Qualidade de Dados</p>
              <p class="text-2xl font-bold text-gray-900">0</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow"
          onclick="filterProjects('cgod', 'governanca')">
          <div class="flex items-center">
            <div class="p-3 rounded-full bg-orange-100 text-orange-600">üõ°Ô∏è</div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-600">Governan√ßa</p>
              <p class="text-2xl font-bold text-gray-900">0</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Projetos CGOD</h3>
        <div class="overflow-x-auto">
          <table class="min-w-full table-auto">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Projeto</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progresso
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Respons√°vel
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Cat√°logo de Metadados</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Planejado</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 15%"></div>
                    </div>
                    <span class="text-sm text-gray-900">15%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ana Lima</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P003')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P003')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">Dashboard Executivo</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Conclu√≠do</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"><span
                    class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div>
                    </div>
                    <span class="text-sm text-gray-900">100%</span>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Fernanda Costa</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <button onclick="showProjectDetail('P005')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è
                    Ver</button>
                  <button onclick="editProject('P005')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <!-- Project Modal -->
  <div id="projectModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-900">Novo Projeto</h3>
            <button onclick="hideModal('projectModal')" class="text-gray-400 hover:text-gray-600">‚úï</button>
          </div>
          <form id="projectForm" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Projeto</label>
                <input type="text" id="projectName" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Tipo do Projeto</label>
                <select id="projectTipo" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                  <option value="">Selecione...</option>
                  <option value="Sistema Web">Sistema Web</option>
                  <option value="Chatbot IA">Chatbot IA</option>
                  <option value="Sistema de Dados">Sistema de Dados</option>
                  <option value="Dashboard">Dashboard</option>
                  <option value="BI Dashboard">BI Dashboard</option>
                  <option value="Infraestrutura">Infraestrutura</option>
                  <option value="Sistema Integrado">Sistema Integrado</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Coordena√ß√£o</label>
                <select id="projectCoord" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                  <option value="">Selecione...</option>
                  <option value="CODES">CODES</option>
                  <option value="COSET">COSET</option>
                  <option value="CGOD">CGOD</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                <select id="projectStatus" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                  <option value="Planejado">Planejado</option>
                  <option value="Em Andamento">Em Andamento</option>
                  <option value="Em Risco">Em Risco</option>
                  <option value="Conclu√≠do">Conclu√≠do</option>
                  <option value="Pausado">Pausado</option>
                  <option value="Sustenta√ß√£o">Sustenta√ß√£o</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Prioridade</label>
                <select id="projectPrioridade" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                  <option value="Baixa">Baixa</option>
                  <option value="M√©dia">M√©dia</option>
                  <option value="Alta">Alta</option>
                  <option value="Cr√≠tica">Cr√≠tica</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Progresso (%)</label>
                <div class="space-y-2">
                  <input type="range" id="projectProgressoSlider" min="0" max="100" value="0"
                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                    oninput="updateProgressDisplay()">
                  <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-500">0%</span>
                    <div class="flex items-center space-x-2">
                      <span id="progressDisplay" class="text-lg font-bold text-blue-600">0%</span>
                      <input type="number" id="projectProgresso" min="0" max="100" value="0"
                        class="w-16 border border-gray-300 rounded px-2 py-1 text-sm" oninput="updateProgressSlider()"
                        required>
                    </div>
                    <span class="text-sm text-gray-500">100%</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-3">
                    <div id="progressBar" class="bg-blue-600 h-3 rounded-full transition-all duration-300"
                      style="width: 0%"></div>
                  </div>
                </div>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Total de Sprints</label>
                <input type="number" id="projectTotalSprints" min="1"
                  class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Sprints Conclu√≠das</label>
                <input type="number" id="projectSprintsConcluidas" min="0"
                  class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Respons√°vel</label>
                <input type="text" id="projectResponsavel" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Data de In√≠cio</label>
                <input type="date" id="projectInicio" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Fim Previsto</label>
                <input type="date" id="projectFim" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Or√ßamento (R$)</label>
                <input type="number" id="projectOrcamento" min="0" step="0.01"
                  class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Descri√ß√£o</label>
              <textarea id="projectDescricao" class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="3"
                required></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Equipe (separar por v√≠rgulas)</label>
              <input type="text" id="projectEquipe" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                placeholder="Jo√£o Silva, Maria Santos, Ana Costa" required>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Status RAG</label>
              <select id="projectRag" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                <option value="Verde">Verde</option>
                <option value="Amarelo">Amarelo</option>
                <option value="Vermelho">Vermelho</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Riscos e Depend√™ncias</label>
              <textarea id="projectRisco" class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="3"
                placeholder="Descreva os principais riscos e depend√™ncias do projeto..."></textarea>
            </div>
            <div class="flex justify-end space-x-3 pt-4">
              <button type="button" onclick="hideModal('projectModal')"
                class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Cancelar</button>
              <button type="submit" id="submitProjectBtn"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Salvar Projeto</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Project Detail Modal -->
  <div id="projectDetailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-6">
            <h3 id="detailProjectName" class="text-2xl font-bold text-gray-900">Plataforma BIVBOT</h3>
            <button onclick="hideModal('projectDetailModal')" class="text-gray-400 hover:text-gray-600">‚úï</button>
          </div>

          <div class="mb-6">
            <div class="bg-blue-50 rounded-lg p-4">
              <h4 id="detailProjectType" class="text-lg font-semibold text-blue-800">Chatbot IA ‚Ä¢ CODES</h4>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-semibold text-gray-700 mb-2">Status RAG</h4>
              <div id="detailRagStatus"
                class="w-full h-8 rounded flex items-center justify-center text-white font-medium rag-verde">Verde</div>
            </div>
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-semibold text-gray-700 mb-2">Prioridade</h4>
              <div id="detailPrioridade"
                class="w-full h-8 rounded flex items-center justify-center text-white font-medium bg-red-500">Cr√≠tica
              </div>
            </div>
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-semibold text-gray-700 mb-2">% Andamento</h4>
              <div class="flex items-center">
                <div class="flex-1 bg-gray-200 rounded-full h-4 mr-3">
                  <div id="detailProgress" class="bg-blue-600 h-4 rounded-full" style="width: 92%"></div>
                </div>
                <span id="detailProgressText" class="text-sm font-medium text-gray-700">92%</span>
              </div>
            </div>
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-semibold text-gray-700 mb-2">Sprints</h4>
              <p id="detailSprints" class="text-2xl font-bold text-blue-600">21 de 30</p>
            </div>
          </div>

          <div id="sprintsSection" class="mb-6">
            <div class="flex justify-between items-center mb-4">
              <h4 class="text-lg font-semibold text-gray-800">Sprints</h4>
              <button onclick="showModal('sprintModal')"
                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">‚ûï Nova Sprint</button>
            </div>
            <div class="overflow-x-auto">
              <table class="min-w-full table-auto">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sprint</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Per√≠odo</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Planejado</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Conclu√≠do</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">% Entrega</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="sprintsTableBody" class="bg-white divide-y divide-gray-200">
                  <tr>
                    <td class="px-4 py-3 text-sm text-gray-900">Sprint 1</td>
                    <td class="px-4 py-3 text-sm text-gray-900">15/06 - 29/06</td>
                    <td class="px-4 py-3 text-sm text-gray-900">35</td>
                    <td class="px-4 py-3 text-sm text-gray-900">32</td>
                    <td class="px-4 py-3 text-sm"><span
                        class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800">91%</span></td>
                    <td class="px-4 py-3 text-sm font-medium"><button onclick="editSprint('S1')"
                        class="text-blue-600 hover:text-blue-900">‚úèÔ∏è Editar</button></td>
                  </tr>
                  <tr>
                    <td class="px-4 py-3 text-sm text-gray-900">Sprint 2</td>
                    <td class="px-4 py-3 text-sm text-gray-900">30/06 - 13/07</td>
                    <td class="px-4 py-3 text-sm text-gray-900">38</td>
                    <td class="px-4 py-3 text-sm text-gray-900">40</td>
                    <td class="px-4 py-3 text-sm"><span
                        class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800">105%</span></td>
                    <td class="px-4 py-3 text-sm font-medium"><button onclick="editSprint('S2')"
                        class="text-blue-600 hover:text-blue-900">‚úèÔ∏è Editar</button></td>
                  </tr>
                  <tr>
                    <td class="px-4 py-3 text-sm text-gray-900">Sprint 3</td>
                    <td class="px-4 py-3 text-sm text-gray-900">14/07 - 27/07</td>
                    <td class="px-4 py-3 text-sm text-gray-900">42</td>
                    <td class="px-4 py-3 text-sm text-gray-900">38</td>
                    <td class="px-4 py-3 text-sm"><span
                        class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800">90%</span></td>
                    <td class="px-4 py-3 text-sm font-medium"><button onclick="editSprint('S3')"
                        class="text-blue-600 hover:text-blue-900">‚úèÔ∏è Editar</button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div class="space-y-6">
              <div class="bg-white border rounded-lg p-4">
                <h4 class="font-semibold text-gray-700 mb-3">Informa√ß√µes do Projeto</h4>
                <div class="space-y-2 text-sm">
                  <p><span class="font-medium">Coordena√ß√£o:</span> <span id="detailCoordenacao">CODES</span></p>
                  <p><span class="font-medium">Respons√°vel:</span> <span id="detailResponsavel">Jo√£o Souza</span></p>
                  <p><span class="font-medium">Status:</span> <span id="detailStatus">Em Andamento</span></p>
                  <p><span class="font-medium">In√≠cio:</span> <span id="detailInicio">15/06/2025</span></p>
                  <p><span class="font-medium">Fim Previsto:</span> <span id="detailFim">15/12/2025</span></p>
                </div>
              </div>

              <div class="bg-white border rounded-lg p-4">
                <h4 class="font-semibold text-gray-700 mb-3">Equipe do Projeto</h4>
                <div id="detailEquipe" class="space-y-2 text-sm"></div>
              </div>
            </div>

            <div class="space-y-6">
              <div class="bg-white border rounded-lg p-4">
                <h4 class="font-semibold text-gray-700 mb-3">Or√ßamento</h4>
                <div class="space-y-3">
                  <div class="flex justify-between items-center">
                    <span class="text-sm font-medium">Or√ßamento Total:</span>
                    <span id="detailOrcamento" class="text-lg font-bold text-blue-600">R$ 180.000,00</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-3">
                    <div id="detailOrcamentoProgress" class="bg-green-500 h-3 rounded-full" style="width: 92%"></div>
                  </div>
                  <div class="flex justify-between text-xs text-gray-600">
                    <span>Executado</span>
                    <span>Dispon√≠vel</span>
                  </div>
                </div>
              </div>

              <div class="bg-white border rounded-lg p-4">
                <h4 class="font-semibold text-gray-700 mb-3">Descri√ß√£o</h4>
                <p id="detailDescricao" class="text-sm text-gray-600">Chatbot inteligente para atendimento automatizado
                  aos usu√°rios.</p>
              </div>
            </div>
          </div>

          <div class="bg-white border rounded-lg p-4">
            <h4 class="font-semibold text-gray-700 mb-3">Riscos e Depend√™ncias</h4>
            <div id="detailRiscos" class="text-sm text-gray-600">
              <strong>Riscos:</strong> Nenhum risco identificado no momento.<br>
              <strong>Depend√™ncias:</strong> Aprova√ß√£o final da arquitetura de seguran√ßa pelo time de infraestrutura.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PDTI Action Modal -->
  <div id="pdtiActionModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-lg w-full">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-900">Nova A√ß√£o PDTI</h3>
            <button onclick="hideModal('pdtiActionModal')" class="text-gray-400 hover:text-gray-600">‚úï</button>
          </div>
          <form id="pdtiActionForm" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ID da A√ß√£o</label>
              <input type="text" id="pdtiActionId" placeholder="Ex: AC.SDF.46"
                class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Descri√ß√£o</label>
              <textarea id="pdtiActionDesc" class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="3"
                placeholder="Descreva a a√ß√£o..." required></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Situa√ß√£o</label>
              <select id="pdtiActionSituacao" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                <option value="">Selecione...</option>
                <option value="N√£o iniciada">N√£o Iniciada</option>
                <option value="Em andamento">Em Andamento</option>
                <option value="Conclu√≠da">Conclu√≠da</option>
                <option value="-">Sem Status</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
              <select id="pdtiActionTipo" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                <option value="">Selecione...</option>
                <option value="SDF">Solu√ß√µes Digitais (SDF)</option>
                <option value="SDD">Solu√ß√µes de Dados (SDD)</option>
                <option value="SDS">Solu√ß√µes de Sistemas (SDS)</option>
              </select>
            </div>
            <div class="flex justify-end space-x-3 pt-4">
              <button type="button" onclick="hideModal('pdtiActionModal')"
                class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Salvar
                A√ß√£o</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Sprint Modal -->
  <div id="sprintModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-lg w-full">
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-900">Nova Sprint</h3>
            <button onclick="hideModal('sprintModal')" class="text-gray-400 hover:text-gray-600">‚úï</button>
          </div>
          <form id="sprintForm" class="space-y-4">
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">N√∫mero da Sprint</label>
                <input type="number" id="sprintNumero" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Capacidade</label>
                <input type="number" id="sprintCapacidade" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Data de In√≠cio</label>
                <input type="date" id="sprintInicio" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Data de Fim</label>
                <input type="date" id="sprintFim" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Itens Planejados</label>
                <input type="number" id="sprintPlanejado" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Itens Conclu√≠dos</label>
                <input type="number" id="sprintConcluido" class="w-full border border-gray-300 rounded-lg px-3 py-2"
                  required>
              </div>
            </div>
            <div class="flex justify-end space-x-3 pt-4">
              <button type="button" onclick="hideModal('sprintModal')"
                class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Cancelar</button>
              <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Salvar
                Sprint</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <footer class="text-center text-sm text-gray-600 py-6">
    <p id="lastUpdate">Atualizado agora</p>
  </footer>
  <script>
    // === Mapeamento de posi√ß√£o dos bot√µes do menu (para simular o clique correto)
    const NAV_INDEX = { home: 1, codes: 2, coset: 3, cgod: 4, pdti: 5 };
    function getNavButtonFor(page) {
      const idx = NAV_INDEX[page] || 1;
      return document.querySelector(`nav .nav-btn:nth-child(${idx})`);
    }

    // === Tabela base usada pelos cards/indicadores para filtrar
    const tableProjects = {


      'Sistema de Monitoramento': {
        coordenacao: 'CODES',
        status: 'Em Risco',
        rag: 'Vermelho',
        progresso: 66,
        sprints: '8 de 15',
        responsavel: 'Carlos Santos',
        categorias: ['ativos', 'desenvolvimento', 'fora-prazo']
      },
      'API Gateway': {
        coordenacao: 'CODES',
        status: 'Sustenta√ß√£o',
        rag: 'Verde',
        progresso: 100,
        sprints: '12 de 12',
        responsavel: 'Ana Costa',
        categorias: ['ativos', 'sustentacao']
      },
      'Portal de Servi√ßos': {
        coordenacao: 'COSET',
        status: 'Em Andamento',
        rag: 'Amarelo',
        progresso: 75,
        sprints: '-',
        responsavel: 'Maria Silva',
        categorias: ['sistemas-integrados', 'modernizacao', 'integracao']
      },
      'Sistema ERP': {
        coordenacao: 'COSET',
        status: 'Sustenta√ß√£o',
        rag: 'Verde',
        progresso: 100,
        sprints: '-',
        responsavel: 'Pedro Lima',
        categorias: ['sistemas-integrados', 'infraestrutura']
      },
      'Cat√°logo de Metadados': {
        coordenacao: 'CGOD',
        status: 'Planejado',
        rag: 'Verde',
        progresso: 15,
        sprints: '-',
        responsavel: 'Ana Lima',
        categorias: ['catalogos', 'datalake']
      },
      'Dashboard Executivo': {
        coordenacao: 'CGOD',
        status: 'Conclu√≠do',
        rag: 'Verde',
        progresso: 100,
        sprints: '-',
        responsavel: 'Fernanda Costa',
        categorias: ['analytics']
      }
    };

    // === Helpers de classe (badges)
    function getStatusBadgeClass(status) {
      switch (status) {
        case 'Em Andamento': return 'bg-green-100 text-green-800';
        case 'Em Risco': return 'bg-red-100 text-red-800';
        case 'Sustenta√ß√£o': return 'bg-yellow-100 text-yellow-800';
        case 'Conclu√≠do': return 'bg-blue-100 text-blue-800';
        case 'Planejado': return 'bg-gray-100 text-gray-800';
        default: return 'bg-gray-100 text-gray-800';
      }
    }
    function getRagClass(rag) {
      switch (rag) {
        case 'Verde': return 'rag-verde';
        case 'Amarelo': return 'rag-amarelo';
        case 'Vermelho': return 'rag-vermelho';
        default: return 'rag-verde';
      }
    }

    // === Converte NOME -> ID (para chamar showProjectDetail/editProject corretos)
    function getProjectIdByName(name) {
      const id = Object.keys(projects).find(pid => projects[pid].nome === name);
      return id || null;
    }
    function showProjectDetailByName(name) {
      const id = getProjectIdByName(name);
      if (!id) return alert('Projeto n√£o encontrado!');
      showProjectDetail(id);
    }
    function editProjectByName(name) {
      const id = getProjectIdByName(name);
      if (!id) return alert('Projeto n√£o encontrado!');
      editProject(id);
    }

    // === Renderers de tabelas
    function renderCodesTable(filtered) {
      const tableBody = document.getElementById('codesTableBody');
      if (!tableBody) return;
      tableBody.innerHTML = '';

      if (filtered.length === 0) {
        tableBody.innerHTML = `<tr><td colspan="7" class="px-6 py-6 text-center text-sm text-gray-500">Nenhum projeto encontrado para esse filtro.</td></tr>`;
        return;
      }

      filtered.forEach(([name, p]) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${name}</div></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeClass(p.status)}">${p.status}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 text-xs font-semibold rounded text-white ${getRagClass(p.rag)}">${p.rag}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                <div class="h-2 rounded-full bg-blue-600" style="width:${p.progresso}%"></div>
              </div>
              <span class="text-sm text-gray-900">${p.progresso}%</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.sprints}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.responsavel}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button onclick="showProjectDetailByName('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è Ver</button>
            <button onclick="editProjectByName('${name}')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateCosetTable(filtered) {
      const tbody = document.querySelector('#cosetPage tbody');
      if (!tbody) return;
      tbody.innerHTML = '';

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="px-6 py-6 text-center text-sm text-gray-500">Nenhum projeto encontrado para esse filtro.</td></tr>`;
        return;
      }

      filtered.forEach(([name, p]) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${name}</div></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeClass(p.status)}">${p.status}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 text-xs font-semibold rounded text-white ${getRagClass(p.rag)}">${p.rag}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                <div class="h-2 rounded-full bg-blue-600" style="width:${p.progresso}%"></div>
              </div>
              <span class="text-sm text-gray-900">${p.progresso}%</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.responsavel}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button onclick="showProjectDetailByName('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è Ver</button>
            <button onclick="editProjectByName('${name}')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    function updateCgodTable(filtered) {
      const tbody = document.querySelector('#cgodPage tbody');
      if (!tbody) return;
      tbody.innerHTML = '';

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="px-6 py-6 text-center text-sm text-gray-500">Nenhum projeto encontrado para esse filtro.</td></tr>`;
        return;
      }

      filtered.forEach(([name, p]) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${name}</div></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeClass(p.status)}">${p.status}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 text-xs font-semibold rounded text-white ${getRagClass(p.rag)}">${p.rag}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                <div class="h-2 rounded-full bg-blue-600" style="width:${p.progresso}%"></div>
              </div>
              <span class="text-sm text-gray-900">${p.progresso}%</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.responsavel}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button onclick="showProjectDetailByName('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è Ver</button>
            <button onclick="editProjectByName('${name}')" class="text-green-600 hover:text-green-900">‚úèÔ∏è Editar</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    // === Banner de filtro (para a p√°gina CODES)
    function showCodesFilterBanner(categoria, count) {
      const tableView = document.getElementById('tableView');
      if (!tableView) return;
      const existing = tableView.querySelector('.bg-blue-50');
      if (existing) existing.remove();

      const label = categoria.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
      const info = document.createElement('div');
      info.className = 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4';
      info.innerHTML = `
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <span class="text-blue-600 mr-2">üîç</span>
            <span class="text-blue-800 font-medium">Filtro ativo: ${label}</span>
            <span class="text-blue-600 ml-2">(${count} projeto${count !== 1 ? 's' : ''})</span>
          </div>
          <button onclick="clearFilter('codes')" class="text-blue-600 hover:text-blue-800 text-sm">‚úï Limpar filtro</button>
        </div>
      `;
      tableView.insertBefore(info, tableView.firstChild);
    }

    // === FILTRO PRINCIPAL (chamado pelos cards)
    function filterProjects(coordenacao, categoria) {
      const coord = (coordenacao || '').toLowerCase();
      const cat = (categoria || '').toLowerCase();

      // Navega para a p√°gina certa clicando no bot√£o do menu (garante highlight correto)
      const btn = getNavButtonFor(coord);
      if (btn) btn.click();
      else if (typeof showPage === 'function') showPage(coord);

      // Filtra
      const filtered = Object.entries(tableProjects).filter(([_, p]) =>
        p.coordenacao.toLowerCase() === coord && p.categorias.map(c => c.toLowerCase()).includes(cat)
      );

      // Renderiza na p√°gina correspondente
      if (coord === 'codes') {
        renderCodesTable(filtered);
        showCodesFilterBanner(cat, filtered.length);
      } else if (coord === 'coset') {
        updateCosetTable(filtered);
      } else if (coord === 'cgod') {
        updateCgodTable(filtered);
      }
    }

    // === limpar filtro (CODES) - restaura 3 linhas padr√£o
    function clearFilter(coordenacao) {
      if ((coordenacao || '').toLowerCase() !== 'codes') return;
      const banner = document.querySelector('#tableView .bg-blue-50');
      if (banner) banner.remove();

      const defaultRows = ['Plataforma BIVBOT', 'Sistema de Monitoramento', 'API Gateway']
        .map(name => [name, tableProjects[name]]);
      renderCodesTable(defaultRows);
    }
  </script>

  <script>
    // ---- Estado ----
    let currentProjectId = null;
    let isEditMode = false;

    const pdtiActions = {/* ... (mesmo objeto grande que voc√™ enviou) ... */ };

    const projects = {
      'P001': { nome: 'Portal de Servi√ßos', tipo: 'Sistema Web', coordenacao: 'COSET', status: 'Em Andamento', prioridade: 'Alta', progresso: 75, totalSprints: 20, sprintsConcluidas: 15, responsavel: 'Maria Silva', inicio: '2024-01-15', fim: '2024-12-15', orcamento: 250000, descricao: 'Portal unificado para acesso aos servi√ßos digitais da organiza√ß√£o.', equipe: 'Maria Silva, Jo√£o Santos, Ana Costa, Pedro Lima', rag: 'Amarelo', riscos: 'Depend√™ncia de aprova√ß√£o de mudan√ßas na arquitetura de seguran√ßa.' },
      'P002': { nome: 'Plataforma BIVBOT', tipo: 'Chatbot IA', coordenacao: 'CODES', status: 'Em Andamento', prioridade: 'Cr√≠tica', progresso: 92, totalSprints: 30, sprintsConcluidas: 21, responsavel: 'Jo√£o Souza', inicio: '2024-06-15', fim: '2024-12-15', orcamento: 180000, descricao: 'Chatbot inteligente para atendimento automatizado aos usu√°rios.', equipe: 'Jo√£o Souza, Carlos Santos, Ana Lima, Fernanda Costa', rag: 'Verde', riscos: 'Nenhum risco identificado no momento.' },
      'P003': { nome: 'Cat√°logo de Metadados', tipo: 'Sistema de Dados', coordenacao: 'CGOD', status: 'Planejado', prioridade: 'M√©dia', progresso: 15, totalSprints: 25, sprintsConcluidas: 3, responsavel: 'Ana Lima', inicio: '2024-08-01', fim: '2025-06-30', orcamento: 320000, descricao: 'Sistema para cataloga√ß√£o e gest√£o de metadados organizacionais.', equipe: 'Ana Lima, Pedro Santos, Maria Costa', rag: 'Verde', riscos: 'Aguardando defini√ß√£o de padr√µes de metadados.' },
      'P004': { nome: 'Sistema de Monitoramento', tipo: 'Dashboard', coordenacao: 'CODES', status: 'Em Risco', prioridade: 'Alta', progresso: 66, totalSprints: 15, sprintsConcluidas: 8, responsavel: 'Carlos Santos', inicio: '2024-03-01', fim: '2024-11-30', orcamento: 150000, descricao: 'Sistema de monitoramento em tempo real dos servi√ßos cr√≠ticos.', equipe: 'Carlos Santos, Jo√£o Silva, Ana Costa', rag: 'Vermelho', riscos: 'Atraso na integra√ß√£o com sistemas legados.' },
      'P005': { nome: 'Dashboard Executivo', tipo: 'BI Dashboard', coordenacao: 'CGOD', status: 'Conclu√≠do', prioridade: 'Alta', progresso: 100, totalSprints: 18, sprintsConcluidas: 18, responsavel: 'Fernanda Costa', inicio: '2024-01-01', fim: '2024-08-31', orcamento: 200000, descricao: 'Dashboard executivo com indicadores estrat√©gicos da organiza√ß√£o.', equipe: 'Fernanda Costa, Ana Lima, Pedro Santos, Maria Silva', rag: 'Verde', riscos: 'Projeto conclu√≠do com sucesso.' },
      'P006': { nome: 'API Gateway', tipo: 'Infraestrutura', coordenacao: 'CODES', status: 'Sustenta√ß√£o', prioridade: 'Cr√≠tica', progresso: 100, totalSprints: 12, sprintsConcluidas: 12, responsavel: 'Ana Costa', inicio: '2023-09-01', fim: '2024-03-31', orcamento: 120000, descricao: 'Gateway centralizado para gerenciamento de APIs organizacionais.', equipe: 'Ana Costa, Jo√£o Souza, Carlos Santos', rag: 'Verde', riscos: 'Em sustenta√ß√£o - monitoramento cont√≠nuo necess√°rio.' },
      'P007': { nome: 'Sistema ERP', tipo: 'Sistema Integrado', coordenacao: 'COSET', status: 'Sustenta√ß√£o', prioridade: 'Cr√≠tica', progresso: 100, totalSprints: 40, sprintsConcluidas: 40, responsavel: 'Pedro Lima', inicio: '2023-01-01', fim: '2024-06-30', orcamento: 500000, descricao: 'Sistema ERP integrado para gest√£o organizacional completa.', equipe: 'Pedro Lima, Maria Silva, Jo√£o Santos, Ana Costa, Carlos Santos', rag: 'Verde', riscos: 'Sistema est√°vel em produ√ß√£o.' }
    };

    // ---- Navega√ß√£o (‚úÖ sem usar event global) ----
    function showPage(pageId, el) {
      document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
      const target = document.getElementById(pageId + 'Page');
      if (target) target.classList.remove('hidden');

      document.querySelectorAll('nav .nav-btn').forEach(btn => {
        btn.classList.remove('border-blue-500', 'text-blue-600');
        btn.classList.add('border-transparent', 'text-gray-500');
      });
      if (el) {
        el.classList.remove('border-transparent', 'text-gray-500');
        el.classList.add('border-blue-500', 'text-blue-600');
      }

      if (pageId === 'home') setTimeout(createCharts, 100);
    }

    // ---- Modais ----
    function hideModal(id) { document.getElementById(id).classList.add('hidden'); }
    function showModal(id) {
      if (id === 'projectModal' && !isEditMode) {
        document.querySelector('#projectModal h3').textContent = 'Novo Projeto';
        document.getElementById('submitProjectBtn').textContent = 'Salvar Projeto';
        document.getElementById('projectForm').reset();
        const slider = document.getElementById('projectProgressoSlider');
        if (slider) { slider.value = 0; updateProgressDisplay(); }
      }
      document.getElementById(id).classList.remove('hidden');
    }

    // ---- Charts ----
    function createCharts() {
      const coord = document.getElementById('coordenacaoChart');
      if (coord) {
        new Chart(coord.getContext('2d'), {
          type: 'doughnut',
          data: { labels: ['CODES', 'COSET', 'CGOD'], datasets: [{ data: [3, 2, 2], backgroundColor: ['#3b82f6', '#8b5cf6', '#f97316'], borderWidth: 2, borderColor: '#ffffff' }] },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 15, usePointStyle: true, font: { size: 12 } } } }, cutout: '60%' }
        });
      }

      const status = document.getElementById('statusChart');
      if (status) {
        new Chart(status.getContext('2d'), {
          type: 'bar',
          data: { labels: ['Planejado', 'Em Andamento', 'Em Risco', 'Conclu√≠do', 'Sustenta√ß√£o'], datasets: [{ label: 'Quantidade', data: [1, 2, 1, 1, 2], backgroundColor: ['#6b7280', '#16a34a', '#dc2626', '#2563eb', '#f59e0b'], borderRadius: 4, borderSkipped: false }] },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { stepSize: 1, font: { size: 11 } }, grid: { color: '#f3f4f6' } }, x: { ticks: { font: { size: 11 } }, grid: { display: false } } }, layout: { padding: { top: 10 } } }
        });
      }
    }

    // ---- Utils ----
    function formatDate(s) { if (!s) return '-'; return new Date(s).toLocaleDateString('pt-BR'); }
    function formatCurrency(v) { if (!v) return 'R$ 0,00'; return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(v); }
    function updateLastUpdateTime() {
      const now = new Date();
      document.getElementById('lastUpdate').textContent = `Hoje, ${now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}`;
    }

    // ---- Helper: buscar por ID ou Nome (‚úÖ corrige cliques que passam nome) ----
    function getProjectByIdOrName(keyOrName) {
      if (projects[keyOrName]) return { id: keyOrName, data: projects[keyOrName] };
      const entry = Object.entries(projects).find(([id, p]) => p.nome === keyOrName);
      return entry ? { id: entry[0], data: entry[1] } : null;
    }

    // ---- Detalhe Projeto ----
    function showProjectDetail(projectKeyOrName) {
      currentProjectId = null;
      const match = getProjectByIdOrName(projectKeyOrName);
      if (!match) { alert('Projeto n√£o encontrado!'); return; }
      const { id, data: project } = match;
      currentProjectId = id;

      document.getElementById('detailProjectName').textContent = project.nome;
      document.getElementById('detailProjectType').textContent = `${project.tipo} ‚Ä¢ ${project.coordenacao}`;

      const rag = document.getElementById('detailRagStatus');
      rag.textContent = project.rag;
      rag.className = `w-full h-8 rounded flex items-center justify-center text-white font-medium rag-${project.rag.toLowerCase()}`;

      const prio = document.getElementById('detailPrioridade');
      prio.textContent = project.prioridade;
      const prioClass = { 'Baixa': 'bg-green-500', 'M√©dia': 'bg-yellow-500', 'Alta': 'bg-orange-500', 'Cr√≠tica': 'bg-red-500' }[project.prioridade] || 'bg-gray-500';
      prio.className = `w-full h-8 rounded flex items-center justify-center text-white font-medium ${prioClass}`;

      document.getElementById('detailProgress').style.width = `${project.progresso}%`;
      document.getElementById('detailProgressText').textContent = `${project.progresso}%`;
      document.getElementById('detailSprints').textContent = `${project.sprintsConcluidas} de ${project.totalSprints}`;

      document.getElementById('detailCoordenacao').textContent = project.coordenacao;
      document.getElementById('detailResponsavel').textContent = project.responsavel;
      document.getElementById('detailStatus').textContent = project.status;
      document.getElementById('detailInicio').textContent = formatDate(project.inicio);
      document.getElementById('detailFim').textContent = formatDate(project.fim);

      document.getElementById('detailDescricao').textContent = project.descricao || 'Nenhuma descri√ß√£o dispon√≠vel.';

      const equipeEl = document.getElementById('detailEquipe');
      equipeEl.innerHTML = '';
      if (project.equipe) {
        const cores = ['bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-pink-500'];
        project.equipe.split(',').map(s => s.trim()).forEach((m, idx) => {
          const div = document.createElement('div');
          div.className = 'flex items-center';
          div.innerHTML = `<span class="w-2 h-2 ${cores[idx % cores.length]} rounded-full mr-2"></span><span>${m}${idx === 0 ? ' (L√≠der)' : ''}</span>`;
          equipeEl.appendChild(div);
        });
      }

      document.getElementById('detailOrcamento').textContent = formatCurrency(project.orcamento);
      document.getElementById('detailOrcamentoProgress').style.width = `${project.progresso}%`;

      document.getElementById('detailRiscos').innerHTML = `<strong>Riscos:</strong> ${project.riscos || 'Nenhum risco identificado.'}<br><strong>Depend√™ncias:</strong> Aprova√ß√£o final da arquitetura de seguran√ßa pelo time de infraestrutura.`;

      showModal('projectDetailModal');
    }

    // ---- Progresso (slider) ----
    function updateProgressDisplay() {
      const slider = document.getElementById('projectProgressoSlider');
      const display = document.getElementById('progressDisplay');
      const input = document.getElementById('projectProgresso');
      const bar = document.getElementById('progressBar');
      const value = Number(slider.value) || 0;
      display.textContent = value + '%';
      input.value = value;
      bar.style.width = value + '%';
      const pct = (value / slider.max) * 100;
      slider.style.background = `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${pct}%, #e5e7eb ${pct}%, #e5e7eb 100%)`;
    }
    function updateProgressSlider() {
      const input = document.getElementById('projectProgresso');
      const slider = document.getElementById('projectProgressoSlider');
      const display = document.getElementById('progressDisplay');
      const bar = document.getElementById('progressBar');
      let value = parseInt(input.value) || 0; if (value < 0) value = 0; if (value > 100) value = 100;
      input.value = value; slider.value = value; display.textContent = value + '%'; bar.style.width = value + '%';
      const pct = (value / slider.max) * 100;
      slider.style.background = `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${pct}%, #e5e7eb ${pct}%, #e5e7eb 100%)`;
    }

    // ---- Form Projeto ----
    document.addEventListener('DOMContentLoaded', () => {
      const pf = document.getElementById('projectForm');
      const sf = document.getElementById('sprintForm');
      pf.addEventListener('submit', function (e) {
        e.preventDefault();
        const data = {
          nome: document.getElementById('projectName').value,
          tipo: document.getElementById('projectTipo').value,
          coordenacao: document.getElementById('projectCoord').value,
          status: document.getElementById('projectStatus').value,
          prioridade: document.getElementById('projectPrioridade').value,
          progresso: parseInt(document.getElementById('projectProgresso').value) || 0,
          totalSprints: parseInt(document.getElementById('projectTotalSprints').value) || 0,
          sprintsConcluidas: parseInt(document.getElementById('projectSprintsConcluidas').value) || 0,
          responsavel: document.getElementById('projectResponsavel').value,
          inicio: document.getElementById('projectInicio').value,
          fim: document.getElementById('projectFim').value,
          orcamento: parseFloat(document.getElementById('projectOrcamento').value) || 0,
          descricao: document.getElementById('projectDescricao').value,
          equipe: document.getElementById('projectEquipe').value,
          rag: document.getElementById('projectRag').value,
          riscos: document.getElementById('projectRisco').value
        };
        if (isEditMode && currentProjectId) {
          projects[currentProjectId] = data;
          alert('Projeto atualizado com sucesso!');
        } else {
          const newId = 'P' + String(Object.keys(projects).length + 1).padStart(3, '0');
          projects[newId] = data;
          alert('Projeto criado com sucesso!');
        }
        hideModal('projectModal');
        this.reset();
        isEditMode = false;
        currentProjectId = null;
        updateLastUpdateTime();
      });

      sf.addEventListener('submit', function (e) {
        e.preventDefault();
        alert('Sprint criada com sucesso!');
        hideModal('sprintModal');
        this.reset();
      });
    });

    // ---- Filtros/Export placeholders (mantidos) ----
    function sortTable(column) { alert('Funcionalidade de ordena√ß√£o ser√° implementada'); }
    function exportData(fmt) { if (fmt === 'csv') { alert('Exporta√ß√£o CSV ser√° implementada'); } else if (fmt === 'pdf') { alert('Exporta√ß√£o PDF ser√° implementada'); } }
    function editSprint(id) { alert('Funcionalidade de edi√ß√£o de sprint ser√° implementada'); }

    // ---- Editar Projeto (‚úÖ aceita ID ou Nome) ----
    function editProject(projectKeyOrName) {
      const match = getProjectByIdOrName(projectKeyOrName);
      if (!match) { alert('Projeto n√£o encontrado!'); return; }
      const { id, data: project } = match;
      currentProjectId = id;
      isEditMode = true;

      document.getElementById('projectName').value = project.nome;
      document.getElementById('projectTipo').value = project.tipo;
      document.getElementById('projectCoord').value = project.coordenacao;
      document.getElementById('projectStatus').value = project.status;
      document.getElementById('projectPrioridade').value = project.prioridade;
      document.getElementById('projectProgresso').value = project.progresso;
      document.getElementById('projectProgressoSlider').value = project.progresso;
      updateProgressDisplay();
      document.getElementById('projectTotalSprints').value = project.totalSprints;
      document.getElementById('projectSprintsConcluidas').value = project.sprintsConcluidas;
      document.getElementById('projectResponsavel').value = project.responsavel;
      document.getElementById('projectInicio').value = project.inicio;
      document.getElementById('projectFim').value = project.fim;
      document.getElementById('projectOrcamento').value = project.orcamento;
      document.getElementById('projectDescricao').value = project.descricao;
      document.getElementById('projectEquipe').value = project.equipe;
      document.getElementById('projectRag').value = project.rag;
      document.getElementById('projectRisco').value = project.riscos;

      document.querySelector('#projectModal h3').textContent = 'Editar Projeto';
      document.getElementById('submitProjectBtn').textContent = 'Atualizar Projeto';

      hideModal('projectDetailModal');
      showModal('projectModal');
    }

    // ---- PDTI (mesmo comportamento do seu c√≥digo) ----
    function loadPDTITable() { /* ... seu c√≥digo original ... */ }
    function filterPDTI() { /* ... */ }
    function showPDTIFilterInfo(count) { /* ... */ }
    function hidePDTIFilterInfo() { /* ... */ }
    function clearPDTIFilters() { document.getElementById('pdtiStatusFilter').value = ''; document.getElementById('pdtiTipoFilter').value = ''; document.getElementById('pdtiSearchFilter').value = ''; hidePDTIFilterInfo(); loadPDTITable(); }
    function sortPDTI(col) { alert(`Ordena√ß√£o por ${col} ser√° implementada`); }
    function editPDTIAction(actionId) { /* ... */ }
    function deletePDTIAction(actionId) { if (confirm('Tem certeza que deseja excluir esta a√ß√£o?')) { delete pdtiActions[actionId]; loadPDTITable(); updatePDTIKPIs(); alert('A√ß√£o exclu√≠da com sucesso!'); } }
    function exportPDTI(format) { if (format === 'excel') { alert('Exporta√ß√£o para Excel ser√° implementada'); } }
    function updatePDTIKPIs() { /* ... */ }

    document.addEventListener('DOMContentLoaded', function () {
      setTimeout(createCharts, 100);
      updateLastUpdateTime();
      loadPDTITable && loadPDTITable();
      updatePDTIKPIs && updatePDTIKPIs();

      // ‚≠ê‚≠ê ADICIONE ESTAS LINHAS ‚≠ê‚≠ê
      updateProjectCounts();
      updateCodesKPIs();

      // garante que a Home apare√ßa com bot√£o ativo ao carregar
      const firstBtn = document.querySelector('nav .nav-btn:first-child');
      showPage('home', firstBtn);
    });
  </script>
  <script>
    // === Fun√ß√£o para contar projetos por coordena√ß√£o ===
    function updateProjectCounts() {
      // Contar projetos totais
      const totalProjetos = Object.keys(projects).length;
      document.getElementById('totalProjetos').textContent = totalProjetos;

      // Contar projetos por coordena√ß√£o
      const projetosCodes = Object.values(projects).filter(p => p.coordenacao === 'CODES').length;
      const projetosCoset = Object.values(projects).filter(p => p.coordenacao === 'COSET').length;
      const projetosCgod = Object.values(projects).filter(p => p.coordenacao === 'CGOD').length;

      document.getElementById('projetosCodes').textContent = projetosCodes;
      document.getElementById('projetosCoset').textContent = projetosCoset;
      document.getElementById('projetosCgod').textContent = projetosCgod;

      // Atualizar tamb√©m os cards de detalhamento por coordena√ß√£o
      updateCoordinationDetailCards();
    }

    // === Fun√ß√£o para atualizar os cards de detalhamento por coordena√ß√£o ===
    function updateCoordinationDetailCards() {
      // CODES - Em Desenvolvimento
      const codesDesenvolvimento = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'Em Andamento'
      ).length;
      const desenvolvimentoSpan = document.querySelector('[onclick*="filterProjects(\'codes\', \'desenvolvimento\')"] span');
      if (desenvolvimentoSpan) desenvolvimentoSpan.textContent = codesDesenvolvimento;

      // CODES - Em Sustenta√ß√£o
      const codesSustentacao = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'Sustenta√ß√£o'
      ).length;
      const sustentacaoSpan = document.querySelector('[onclick*="filterProjects(\'codes\', \'sustentacao\')"] span');
      if (sustentacaoSpan) sustentacaoSpan.textContent = codesSustentacao;

      // COSET - Infraestrutura
      const cosetInfraestrutura = Object.values(projects).filter(p =>
        p.coordenacao === 'COSET' && p.tipo === 'Infraestrutura'
      ).length;
      const infraestruturaSpan = document.querySelector('[onclick*="filterProjects(\'coset\', \'infraestrutura\')"] span');
      if (infraestruturaSpan) infraestruturaSpan.textContent = cosetInfraestrutura;

      // COSET - Integra√ß√£o
      const cosetIntegracao = Object.values(projects).filter(p =>
        p.coordenacao === 'COSET' && p.tipo === 'Sistema Integrado'
      ).length;
      const integracaoSpan = document.querySelector('[onclick*="filterProjects(\'coset\', \'integracao\')"] span');
      if (integracaoSpan) integracaoSpan.textContent = cosetIntegracao;

      // CGOD - Analytics
      const cgodAnalytics = Object.values(projects).filter(p =>
        p.coordenacao === 'CGOD' && p.tipo === 'BI Dashboard'
      ).length;
      const analyticsSpan = document.querySelector('[onclick*="filterProjects(\'cgod\', \'analytics\')"] span');
      if (analyticsSpan) analyticsSpan.textContent = cgodAnalytics;

      // CGOD - Data Lake
      const cgodDatalake = Object.values(projects).filter(p =>
        p.coordenacao === 'CGOD' && p.tipo === 'Sistema de Dados'
      ).length;
      const datalakeSpan = document.querySelector('[onclick*="filterProjects(\'cgod\', \'datalake\')"] span');
      if (datalakeSpan) datalakeSpan.textContent = cgodDatalake;
    }

    // === Atualizar tamb√©m os KPIs das p√°ginas individuais ===
    function updateCodesKPIs() {
      const codesAtivos = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && (p.status === 'Em Andamento' || p.status === 'Sustenta√ß√£o')
      ).length;

      const codesDesenvolvimento = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'Em Andamento'
      ).length;

      const codesSustentacao = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'Sustenta√ß√£o'
      ).length;

      const codesForaPrazo = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.rag === 'Vermelho'
      ).length;

      // Atualizar os cards da p√°gina CODES
      const codesCards = document.querySelectorAll('#codesPage .bg-white.rounded-lg.shadow-md.p-6');
      if (codesCards.length >= 4) {
        codesCards[0].querySelector('.text-2xl').textContent = codesAtivos;
        codesCards[1].querySelector('.text-2xl').textContent = codesDesenvolvimento;
        codesCards[2].querySelector('.text-2xl').textContent = codesSustentacao;
        codesCards[3].querySelector('.text-2xl').textContent = codesForaPrazo;
      }
    }

    // ---- Charts ----
    function createCharts() {
      // Contar projetos por coordena√ß√£o para o gr√°fico
      const codesCount = Object.values(projects).filter(p => p.coordenacao === 'CODES').length;
      const cosetCount = Object.values(projects).filter(p => p.coordenacao === 'COSET').length;
      const cgodCount = Object.values(projects).filter(p => p.coordenacao === 'CGOD').length;

      const coord = document.getElementById('coordenacaoChart');
      if (coord) {
        new Chart(coord.getContext('2d'), {
          type: 'doughnut',
          data: {
            labels: ['CODES', 'COSET', 'CGOD'],
            datasets: [{
              data: [codesCount, cosetCount, cgodCount],
              backgroundColor: ['#3b82f6', '#8b5cf6', '#f97316'],
              borderWidth: 2,
              borderColor: '#ffffff'
            }]
          },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 15, usePointStyle: true, font: { size: 12 } } } }, cutout: '60%' }
        });
      }

      // Contar projetos por status para o gr√°fico
      const statusCounts = {
        'Planejado': Object.values(projects).filter(p => p.status === 'Planejado').length,
        'Em Andamento': Object.values(projects).filter(p => p.status === 'Em Andamento').length,
        'Em Risco': Object.values(projects).filter(p => p.status === 'Em Risco').length,
        'Conclu√≠do': Object.values(projects).filter(p => p.status === 'Conclu√≠do').length,
        'Sustenta√ß√£o': Object.values(projects).filter(p => p.status === 'Sustenta√ß√£o').length
      };

      const status = document.getElementById('statusChart');
      if (status) {
        new Chart(status.getContext('2d'), {
          type: 'bar',
          data: {
            labels: ['Planejado', 'Em Andamento', 'Em Risco', 'Conclu√≠do', 'Sustenta√ß√£o'],
            datasets: [{
              label: 'Quantidade',
              data: [
                statusCounts['Planejado'],
                statusCounts['Em Andamento'],
                statusCounts['Em Risco'],
                statusCounts['Conclu√≠do'],
                statusCounts['Sustenta√ß√£o']
              ],
              backgroundColor: ['#6b7280', '#16a34a', '#dc2626', '#2563eb', '#f59e0b'],
              borderRadius: 4,
              borderSkipped: false
            }]
          },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { stepSize: 1, font: { size: 11 } }, grid: { color: '#f3f4f6' } }, x: { ticks: { font: { size: 11 } }, grid: { display: false } } }, layout: { padding: { top: 10 } } }
        });
      }
    }
  </script>
</body>

</html>