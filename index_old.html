<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>CGSOL - Sistema de Monitoramento</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    .rag-verde {
      background-color: #16a34a;
    }

    .rag-amarelo {
      background-color: #f59e0b;
    }

    .rag-vermelho {
      background-color: #dc2626;
    }

    .status-concluido {
      background-color: #2563eb;
    }

    .project-card {
      transition: all 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, .15);
    }

    .slider {
      -webkit-appearance: none;
      appearance: none;
      background: linear-gradient(to right, #3b82f6 0%, #3b82f6 0%, #e5e7eb 0%, #e5e7eb 100%);
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      height: 20px;
      width: 20px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .2);
    }

    .slider::-moz-range-thumb {
      height: 20px;
      width: 20px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .2);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
<!-- Header -->
<header class="bg-blue-900 text-white shadow-lg">
<div class="container mx-auto px-4 py-4">
<div class="flex justify-between items-center">
<div>
<h1 class="text-2xl font-bold">CGSOL</h1>
<p class="text-blue-200 text-sm">CoordenaÃ§Ã£o Geral de SoluÃ§Ãµes</p>
</div>
<div class="flex items-center space-x-4">
<select class="bg-blue-800 text-white px-3 py-2 rounded border border-blue-700" id="userRole">
<option value="coordenacao">CoordenaÃ§Ã£o Geral</option>
<option value="gestor">Gestor de SubcoordenaÃ§Ã£o</option>
<option value="stakeholder">Stakeholder Leitura</option>
</select>
<span class="text-blue-200">ğŸ‘¤ Admin</span>
</div>
</div>
</div>
</header>
<!-- Navigation -->
<nav class="bg-white shadow-sm border-b">
<div class="container mx-auto px-4">
<div class="flex space-x-8">
<!-- âœ… PASSANDO this para showPage -->
<button class="nav-btn py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" onclick="showPage('home', this)">
          ğŸ  VisÃ£o CGSOL
        </button>
<button class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700" onclick="showPage('codes', this)">
          ğŸ’» CODES
        </button>
<button class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700" onclick="showPage('coset', this)">
          ğŸ—ï¸ COSET
        </button>
<button class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700" onclick="showPage('cgod', this)">
          ğŸ“Š CGOD
        </button>
<button class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700" onclick="showPage('pdti', this)">
          ğŸ“‹ PDTI
        </button>
</div>
</div>
</nav>
<!-- Main Content -->
<main class="container mx-auto px-4 py-6">
<!-- Home Page -->
<div class="page-content" id="homePage">
<div class="mb-8">
<div class="flex justify-between items-center">
<div>
<h2 class="text-2xl font-bold text-gray-800 mb-1">Dashboard CGSOL</h2>
<p class="text-gray-600">VisÃ£o consolidada das trÃªs subcoordenaÃ§Ãµes</p>
</div>
<div class="text-right">
<p class="text-sm text-gray-500">Ãšltima atualizaÃ§Ã£o</p>
<p class="text-sm font-medium text-gray-700" id="lastUpdate"></p>
</div>
</div>
</div>
<!-- KPIs Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center">
<div class="p-3 rounded-full bg-blue-100 text-blue-600">ğŸ“‹</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Total de Projetos</p>
<p class="text-2xl font-bold text-gray-900" id="totalProjetos">7</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="showPage('codes', document.querySelector('nav .nav-btn:nth-child(2)'))">
<div class="flex items-center">
<div class="p-3 rounded-full bg-green-100 text-green-600">ğŸ’»</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">CODES</p>
<p class="text-2xl font-bold text-gray-900" id="projetosCodes">3</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="showPage('coset', document.querySelector('nav .nav-btn:nth-child(3)'))">
<div class="flex items-center">
<div class="p-3 rounded-full bg-purple-100 text-purple-600">ğŸ—ï¸</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">COSET</p>
<p class="text-2xl font-bold text-gray-900" id="projetosCoset">2</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="showPage('cgod', document.querySelector('nav .nav-btn:nth-child(4)'))">
<div class="flex items-center">
<div class="p-3 rounded-full bg-orange-100 text-orange-600">ğŸ“Š</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">CGOD</p>
<p class="text-2xl font-bold text-gray-900" id="projetosCgod">2</p>
</div>
</div>
</div>
</div>
<!-- Charts Row -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
<div class="bg-white rounded-lg shadow-md p-6">
<h3 class="text-lg font-semibold text-gray-800 mb-4">Projetos por CoordenaÃ§Ã£o</h3>
<div class="h-64 flex items-center justify-center">
<canvas class="max-h-48" id="coordenacaoChart"></canvas>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6">
<h3 class="text-lg font-semibold text-gray-800 mb-4">Status dos Projetos</h3>
<div class="h-64 flex items-center justify-center">
<canvas class="max-h-48" id="statusChart"></canvas>
</div>
</div>
</div>
<!-- Cards por CoordenaÃ§Ã£o -->
<div class="mb-8">
<h3 class="text-lg font-semibold text-gray-800 mb-4">Detalhamento por CoordenaÃ§Ã£o</h3>
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
<!-- CODES -->
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center mb-4">
<div class="p-2 rounded-lg bg-blue-100 text-blue-600 mr-3">ğŸ’»</div>
<h4 class="text-lg font-semibold text-gray-800">CODES</h4>
</div>
<div class="space-y-3">
<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="filterProjects('codes', 'desenvolvimento')">
<div>
<p class="font-medium text-gray-900">Em Desenvolvimento</p>
<p class="text-xs text-gray-600">Projetos ativos</p>
</div>
<span class="text-lg font-bold text-blue-600">2</span>
</div>
<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="filterProjects('codes', 'sustentacao')">
<div>
<p class="font-medium text-gray-900">Em SustentaÃ§Ã£o</p>
<p class="text-xs text-gray-600">Sistemas em produÃ§Ã£o</p>
</div>
<span class="text-lg font-bold text-yellow-600">1</span>
</div>
</div>
</div>
<!-- COSET -->
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center mb-4">
<div class="p-2 rounded-lg bg-purple-100 text-purple-600 mr-3">ğŸ—ï¸</div>
<h4 class="text-lg font-semibold text-gray-800">COSET</h4>
</div>
<div class="space-y-3">
<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="filterProjects('coset', 'infraestrutura')">
<div>
<p class="font-medium text-gray-900">Infraestrutura</p>
<p class="text-xs text-gray-600">Sistemas estruturantes</p>
</div>
<span class="text-lg font-bold text-purple-600">1</span>
</div>
<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="filterProjects('coset', 'integracao')">
<div>
<p class="font-medium text-gray-900">IntegraÃ§Ã£o</p>
<p class="text-xs text-gray-600">Conectividade entre sistemas</p>
</div>
<span class="text-lg font-bold text-green-600">1</span>
</div>
</div>
</div>
<!-- CGOD -->
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center mb-4">
<div class="p-2 rounded-lg bg-orange-100 text-orange-600 mr-3">ğŸ“Š</div>
<h4 class="text-lg font-semibold text-gray-800">CGOD</h4>
</div>
<div class="space-y-3">
<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="filterProjects('cgod', 'analytics')">
<div>
<p class="font-medium text-gray-900">Analytics</p>
<p class="text-xs text-gray-600">Dashboards e relatÃ³rios</p>
</div>
<span class="text-lg font-bold text-orange-600">1</span>
</div>
<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="filterProjects('cgod', 'datalake')">
<div>
<p class="font-medium text-gray-900">Data Lake</p>
<p class="text-xs text-gray-600">CatÃ¡logos e metadados</p>
</div>
<span class="text-lg font-bold text-blue-600">1</span>
</div>
</div>
</div>
</div>
</div>
<!-- Recent Projects Table -->
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-semibold text-gray-800">Projetos Recentes</h3>
<button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm" onclick="exportData('csv')">ğŸ“Š Exportar CSV</button>
</div>
<div class="overflow-x-auto">
<table class="min-w-full table-auto">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Projeto</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CoordenaÃ§Ã£o
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ResponsÃ¡vel
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">AÃ§Ãµes</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200" id="projectsTableBody">
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Portal de ServiÃ§os</div>
</td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm text-gray-900">COSET</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-amarelo">Amarelo</span></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Maria Silva</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P001')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P001')">âœï¸ Editar</button>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Plataforma BIVBOT</div>
</td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm text-gray-900">CODES</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">JoÃ£o Souza</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P002')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P002')">âœï¸ Editar</button>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<!-- CODES Page -->
<div class="page-content hidden" id="codesPage">
<div class="mb-6">
<div class="flex justify-between items-center">
<div>
<h2 class="text-3xl font-bold text-gray-800 mb-2">CODES</h2>
<p class="text-gray-600">CoordenaÃ§Ã£o de Desenvolvimento e Arquitetura de SoluÃ§Ãµes</p>
</div>
<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg" onclick="showModal('projectModal')">â• Novo Projeto</button>
</div>
</div>
<!-- KPIs CODES -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('codes', 'ativos')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-blue-100 text-blue-600">ğŸš€</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Projetos Ativos</p>
<p class="text-2xl font-bold text-gray-900">3</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('codes', 'desenvolvimento')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-green-100 text-green-600">ğŸ’»</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Desenvolvimento</p>
<p class="text-2xl font-bold text-gray-900">2</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('codes', 'sustentacao')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-yellow-100 text-yellow-600">ğŸ”§</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">SustentaÃ§Ã£o</p>
<p class="text-2xl font-bold text-gray-900">1</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('codes', 'fora-prazo')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-red-100 text-red-600">â°</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Fora de Prazo</p>
<p class="text-2xl font-bold text-gray-900">1</p>
</div>
</div>
</div>
</div>
<!-- Filters -->
<div class="bg-white rounded-lg shadow-md p-4 mb-6">
<div class="grid grid-cols-1 md:grid-cols-4 gap-4">
<select class="border border-gray-300 rounded-lg px-3 py-2">
<option>Todos os Status</option>
<option>Planejado</option>
<option>Em Andamento</option>
<option>Em Risco</option>
<option>ConcluÃ­do</option>
<option>Pausado</option>
</select>
<select class="border border-gray-300 rounded-lg px-3 py-2">
<option>Todos os ResponsÃ¡veis</option>
<option>JoÃ£o Souza</option>
<option>Carlos Santos</option>
</select>
<input class="border border-gray-300 rounded-lg px-3 py-2" type="date"/>
<button class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg">ğŸ” Filtrar</button>
</div>
</div>
<!-- Export Button -->
<div class="flex justify-end items-center mb-6">
<button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm" onclick="exportData('pdf')">ğŸ“„ Exportar PDF</button>
</div>
<!-- Table View -->
<div class="bg-white rounded-lg shadow-md" id="tableView">
<div class="overflow-x-auto">
<table class="min-w-full table-auto">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer" onclick="sortTable('nome')">Projeto â†•ï¸</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progresso
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sprints</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ResponsÃ¡vel
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">AÃ§Ãµes</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200" id="codesTableBody">
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Plataforma BIVBOT</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 92%"></div>
</div>
<span class="text-sm text-gray-900">92%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span class="font-medium text-blue-600">21</span> de <span class="text-gray-600">30</span></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">JoÃ£o Souza</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P002')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P002')">âœï¸ Editar</button>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Sistema de Monitoramento</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Em
                    Risco</span></td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-vermelho">Vermelho</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 66%"></div>
</div>
<span class="text-sm text-gray-900">66%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span class="font-medium text-blue-600">8</span> de <span class="text-gray-600">15</span></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Carlos Santos</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P004')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P004')">âœï¸ Editar</button>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">API Gateway</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">SustentaÃ§Ã£o</span>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div>
</div>
<span class="text-sm text-gray-900">100%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span class="font-medium text-blue-600">12</span> de <span class="text-gray-600">12</span></td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ana Costa</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P006')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P006')">âœï¸ Editar</button>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<!-- COSET Page -->
<div class="page-content hidden" id="cosetPage">
<div class="mb-6">
<div class="flex justify-between items-center">
<div>
<h2 class="text-3xl font-bold text-gray-800 mb-2">COSET</h2>
<p class="text-gray-600">CoordenaÃ§Ã£o de Sistemas Estruturantes</p>
</div>
<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg" onclick="showModal('projectModal')">â• Novo Projeto</button>
</div>
</div>
<!-- KPIs COSET -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('coset', 'sistemas-integrados')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-blue-100 text-blue-600">ğŸ”—</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Sistemas Integrados</p>
<p class="text-2xl font-bold text-gray-900">2</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('coset', 'modernizacao')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-green-100 text-green-600">ğŸ”„</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">ModernizaÃ§Ã£o</p>
<p class="text-2xl font-bold text-gray-900">1</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('coset', 'infraestrutura')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-purple-100 text-purple-600">ğŸ—ï¸</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Infraestrutura</p>
<p class="text-2xl font-bold text-gray-900">1</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('coset', 'compliance')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-orange-100 text-orange-600">âœ…</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Compliance</p>
<p class="text-2xl font-bold text-gray-900">0</p>
</div>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6">
<h3 class="text-lg font-semibold text-gray-800 mb-4">Projetos COSET</h3>
<div class="overflow-x-auto">
<table class="min-w-full table-auto">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Projeto</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progresso
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ResponsÃ¡vel
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">AÃ§Ãµes</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Portal de ServiÃ§os</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Em
                    Andamento</span></td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-amarelo">Amarelo</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 75%"></div>
</div>
<span class="text-sm text-gray-900">75%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Maria Silva</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P001')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P001')">âœï¸ Editar</button>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Sistema ERP</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">SustentaÃ§Ã£o</span>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div>
</div>
<span class="text-sm text-gray-900">100%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Pedro Lima</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P007')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P007')">âœï¸ Editar</button>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<!-- PDTI Page -->
<div class="page-content hidden" id="pdtiPage">
<div class="mb-6">
<div class="flex justify-between items-center">
<div>
<h2 class="text-3xl font-bold text-gray-800 mb-2">PDTI - Plano Diretor de Tecnologia da InformaÃ§Ã£o</h2>
<p class="text-gray-600">Monitoramento das aÃ§Ãµes de SoluÃ§Ãµes Digitais</p>
</div>
<div class="flex space-x-3">
<button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm" onclick="exportPDTI('excel')">ğŸ“Š Exportar Excel</button>
<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg" onclick="showModal('pdtiActionModal')">â• Nova AÃ§Ã£o</button>
</div>
</div>
</div>
<!-- KPIs PDTI -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center">
<div class="p-3 rounded-full bg-blue-100 text-blue-600">ğŸ“‹</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Total de AÃ§Ãµes</p>
<p class="text-2xl font-bold text-gray-900" id="totalAcoes">77</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center">
<div class="p-3 rounded-full bg-green-100 text-green-600">âœ…</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">ConcluÃ­das</p>
<p class="text-2xl font-bold text-gray-900" id="acoesConcluidas">19</p>
<p class="text-xs text-green-600 font-medium">25%</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center">
<div class="p-3 rounded-full bg-yellow-100 text-yellow-600">ğŸ”„</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Em Andamento</p>
<p class="text-2xl font-bold text-gray-900" id="acoesAndamento">16</p>
<p class="text-xs text-yellow-600 font-medium">21%</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6">
<div class="flex items-center">
<div class="p-3 rounded-full bg-red-100 text-red-600">â¸ï¸</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">NÃ£o Iniciadas</p>
<p class="text-2xl font-bold text-gray-900" id="acoesNaoIniciadas">42</p>
<p class="text-xs text-red-600 font-medium">54%</p>
</div>
</div>
</div>
</div>
<!-- Progress Chart -->
<div class="bg-white rounded-lg shadow-md p-6 mb-8">
<h3 class="text-lg font-semibold text-gray-800 mb-4">Progresso Geral do PDTI</h3>
<div class="w-full bg-gray-200 rounded-full h-6 mb-4">
<div class="bg-gradient-to-r from-green-500 to-blue-500 h-6 rounded-full flex items-center justify-center text-white text-sm font-medium" style="width: 25%">25% ConcluÃ­do</div>
</div>
<div class="grid grid-cols-3 gap-4 text-center">
<div>
<p class="text-2xl font-bold text-green-600">19</p>
<p class="text-sm text-gray-600">ConcluÃ­das</p>
</div>
<div>
<p class="text-2xl font-bold text-yellow-600">16</p>
<p class="text-sm text-gray-600">Em Andamento</p>
</div>
<div>
<p class="text-2xl font-bold text-red-600">42</p>
<p class="text-sm text-gray-600">NÃ£o Iniciadas</p>
</div>
</div>
</div>
<!-- Filters -->
<div class="bg-white rounded-lg shadow-md p-4 mb-6">
<div class="grid grid-cols-1 md:grid-cols-4 gap-4">
<select class="border border-gray-300 rounded-lg px-3 py-2" id="pdtiStatusFilter" onchange="filterPDTI()">
<option value="">Todas as SituaÃ§Ãµes</option>
<option value="ConcluÃ­da">ConcluÃ­da</option>
<option value="Em andamento">Em Andamento</option>
<option value="NÃ£o iniciada">NÃ£o Iniciada</option>
<option value="-">Sem Status</option>
</select>
<select class="border border-gray-300 rounded-lg px-3 py-2" id="pdtiTipoFilter" onchange="filterPDTI()">
<option value="">Todos os Tipos</option>
<option value="SDF">SoluÃ§Ãµes Digitais (SDF)</option>
<option value="SDD">SoluÃ§Ãµes de Dados (SDD)</option>
<option value="SDS">SoluÃ§Ãµes de Sistemas (SDS)</option>
</select>
<input class="border border-gray-300 rounded-lg px-3 py-2" id="pdtiSearchFilter" onkeyup="filterPDTI()" placeholder="Buscar por descriÃ§Ã£o..." type="text"/>
<button class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg" onclick="clearPDTIFilters()">ğŸ”„
            Limpar Filtros</button>
</div>
</div>
<!-- PDTI Actions Table -->
<div class="bg-white rounded-lg shadow-md">
<div class="p-6 border-b border-gray-200">
<h3 class="text-lg font-semibold text-gray-800">AÃ§Ãµes do PDTI - SoluÃ§Ãµes Digitais</h3>
</div>
<div class="overflow-x-auto">
<table class="min-w-full table-auto">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer" onclick="sortPDTI('id')">ID AÃ‡ÃƒO â†•ï¸</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer" onclick="sortPDTI('descricao')">DESCRIÃ‡ÃƒO â†•ï¸</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer" onclick="sortPDTI('situacao')">SITUAÃ‡ÃƒO â†•ï¸</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TIPO</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">AÃ‡Ã•ES</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200" id="pdtiTableBody"></tbody>
</table>
</div>
</div>
</div>
<!-- CGOD Page -->
<div class="page-content hidden" id="cgodPage">
<div class="mb-6">
<div class="flex justify-between items-center">
<div>
<h2 class="text-3xl font-bold text-gray-800 mb-2">CGOD</h2>
<p class="text-gray-600">CoordenaÃ§Ã£o de GovernanÃ§a de Dados</p>
</div>
<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg" onclick="showModal('projectModal')">â• Novo Projeto</button>
</div>
</div>
<!-- KPIs CGOD -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('cgod', 'catalogos')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-blue-100 text-blue-600">ğŸ“š</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">CatÃ¡logos de Dados</p>
<p class="text-2xl font-bold text-gray-900">1</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('cgod', 'analytics')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-green-100 text-green-600">ğŸ“Š</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Analytics &amp; BI</p>
<p class="text-2xl font-bold text-gray-900">1</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('cgod', 'qualidade')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-purple-100 text-purple-600">ğŸ¯</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">Qualidade de Dados</p>
<p class="text-2xl font-bold text-gray-900">0</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow" onclick="filterProjects('cgod', 'governanca')">
<div class="flex items-center">
<div class="p-3 rounded-full bg-orange-100 text-orange-600">ğŸ›¡ï¸</div>
<div class="ml-4">
<p class="text-sm font-medium text-gray-600">GovernanÃ§a</p>
<p class="text-2xl font-bold text-gray-900">0</p>
</div>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-md p-6">
<h3 class="text-lg font-semibold text-gray-800 mb-4">Projetos CGOD</h3>
<div class="overflow-x-auto">
<table class="min-w-full table-auto">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Projeto</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RAG</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progresso
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ResponsÃ¡vel
                </th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">AÃ§Ãµes</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">CatÃ¡logo de Metadados</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Planejado</span>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 15%"></div>
</div>
<span class="text-sm text-gray-900">15%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ana Lima</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P003')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P003')">âœï¸ Editar</button>
</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap">
<div class="text-sm font-medium text-gray-900">Dashboard Executivo</div>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">ConcluÃ­do</span>
</td>
<td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-semibold rounded text-white rag-verde">Verde</span></td>
<td class="px-6 py-4 whitespace-nowrap">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div>
</div>
<span class="text-sm text-gray-900">100%</span>
</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Fernanda Costa</td>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
<button class="text-blue-600 hover:text-blue-900 mr-3" onclick="showProjectDetail('P005')">ğŸ‘ï¸
                    Ver</button>
<button class="text-green-600 hover:text-green-900" onclick="editProject('P005')">âœï¸ Editar</button>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</main>
<!-- Project Modal -->
<div class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50" id="projectModal">
<div class="flex items-center justify-center min-h-screen p-4">
<div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
<div class="p-6">
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-semibold text-gray-900">Novo Projeto</h3>
<button class="text-gray-400 hover:text-gray-600" onclick="hideModal('projectModal')">âœ•</button>
</div>
<form class="space-y-4" id="projectForm">
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Nome do Projeto</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectName" required="" type="text"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Tipo do Projeto</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectTipo" required="">
<option value="">Selecione...</option>
<option value="Sistema Web">Sistema Web</option>
<option value="Chatbot IA">Chatbot IA</option>
<option value="Sistema de Dados">Sistema de Dados</option>
<option value="Dashboard">Dashboard</option>
<option value="BI Dashboard">BI Dashboard</option>
<option value="Infraestrutura">Infraestrutura</option>
<option value="Sistema Integrado">Sistema Integrado</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">CoordenaÃ§Ã£o</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectCoord" required="">
<option value="">Selecione...</option>
<option value="CODES">CODES</option>
<option value="COSET">COSET</option>
<option value="CGOD">CGOD</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectStatus" required="">
<option value="Planejado">Planejado</option>
<option value="Em Andamento">Em Andamento</option>
<option value="Em Risco">Em Risco</option>
<option value="ConcluÃ­do">ConcluÃ­do</option>
<option value="Pausado">Pausado</option>
<option value="SustentaÃ§Ã£o">SustentaÃ§Ã£o</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Prioridade</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectPrioridade" required="">
<option value="Baixa">Baixa</option>
<option value="MÃ©dia">MÃ©dia</option>
<option value="Alta">Alta</option>
<option value="CrÃ­tica">CrÃ­tica</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Progresso (%)</label>
<div class="space-y-2">
<input class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider" id="projectProgressoSlider" max="100" min="0" oninput="updateProgressDisplay()" type="range" value="0"/>
<div class="flex justify-between items-center">
<span class="text-sm text-gray-500">0%</span>
<div class="flex items-center space-x-2">
<span class="text-lg font-bold text-blue-600" id="progressDisplay">0%</span>
<input class="w-16 border border-gray-300 rounded px-2 py-1 text-sm" id="projectProgresso" max="100" min="0" oninput="updateProgressSlider()" required="" type="number" value="0"/>
</div>
<span class="text-sm text-gray-500">100%</span>
</div>
<div class="w-full bg-gray-200 rounded-full h-3">
<div class="bg-blue-600 h-3 rounded-full transition-all duration-300" id="progressBar" style="width: 0%"></div>
</div>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Total de Sprints</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectTotalSprints" min="1" required="" type="number"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Sprints ConcluÃ­das</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectSprintsConcluidas" min="0" required="" type="number"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">ResponsÃ¡vel</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectResponsavel" required="" type="text"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Data de InÃ­cio</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectInicio" required="" type="date"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Fim Previsto</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectFim" required="" type="date"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">OrÃ§amento (R$)</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectOrcamento" min="0" required="" step="0.01" type="number"/>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">DescriÃ§Ã£o</label>
<textarea class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectDescricao" required="" rows="3"></textarea>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Equipe (separar por vÃ­rgulas)</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectEquipe" placeholder="JoÃ£o Silva, Maria Santos, Ana Costa" required="" type="text"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Status RAG</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectRag" required="">
<option value="Verde">Verde</option>
<option value="Amarelo">Amarelo</option>
<option value="Vermelho">Vermelho</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Riscos e DependÃªncias</label>
<textarea class="w-full border border-gray-300 rounded-lg px-3 py-2" id="projectRisco" placeholder="Descreva os principais riscos e dependÃªncias do projeto..." rows="3"></textarea>
</div>
<div class="flex justify-end space-x-3 pt-4">
<button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" onclick="hideModal('projectModal')" type="button">Cancelar</button>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" id="submitProjectBtn" type="submit">Salvar Projeto</button>
</div>
</form>
</div>
</div>
</div>
</div>
<!-- Project Detail Modal -->
<div class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50" id="projectDetailModal">
<div class="flex items-center justify-center min-h-screen p-4">
<div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto">
<div class="p-6">
<div class="flex justify-between items-center mb-6">
<h3 class="text-2xl font-bold text-gray-900" id="detailProjectName">Plataforma BIVBOT</h3>
<button class="text-gray-400 hover:text-gray-600" onclick="hideModal('projectDetailModal')">âœ•</button>
</div>
<div class="mb-6">
<div class="bg-blue-50 rounded-lg p-4">
<h4 class="text-lg font-semibold text-blue-800" id="detailProjectType">Chatbot IA â€¢ CODES</h4>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
<div class="bg-gray-50 rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-2">Status RAG</h4>
<div class="w-full h-8 rounded flex items-center justify-center text-white font-medium rag-verde" id="detailRagStatus">Verde</div>
</div>
<div class="bg-gray-50 rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-2">Prioridade</h4>
<div class="w-full h-8 rounded flex items-center justify-center text-white font-medium bg-red-500" id="detailPrioridade">CrÃ­tica
              </div>
</div>
<div class="bg-gray-50 rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-2">% Andamento</h4>
<div class="flex items-center">
<div class="flex-1 bg-gray-200 rounded-full h-4 mr-3">
<div class="bg-blue-600 h-4 rounded-full" id="detailProgress" style="width: 92%"></div>
</div>
<span class="text-sm font-medium text-gray-700" id="detailProgressText">92%</span>
</div>
</div>
<div class="bg-gray-50 rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-2">Sprints</h4>
<p class="text-2xl font-bold text-blue-600" id="detailSprints">21 de 30</p>
</div>
</div>
<div class="mb-6" id="sprintsSection">
<div class="flex justify-between items-center mb-4">
<h4 class="text-lg font-semibold text-gray-800">Sprints</h4>
<button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm" onclick="showModal('sprintModal')">â• Nova Sprint</button>
</div>
<div class="overflow-x-auto">
<table class="min-w-full table-auto">
<thead class="bg-gray-50">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sprint</th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">PerÃ­odo</th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Planejado</th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">ConcluÃ­do</th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">% Entrega</th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">AÃ§Ãµes</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200" id="sprintsTableBody">
<tr>
<td class="px-4 py-3 text-sm text-gray-900">Sprint 1</td>
<td class="px-4 py-3 text-sm text-gray-900">15/06 - 29/06</td>
<td class="px-4 py-3 text-sm text-gray-900">35</td>
<td class="px-4 py-3 text-sm text-gray-900">32</td>
<td class="px-4 py-3 text-sm"><span class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800">91%</span></td>
<td class="px-4 py-3 text-sm font-medium"><button class="text-blue-600 hover:text-blue-900" onclick="editSprint('S1')">âœï¸ Editar</button></td>
</tr>
<tr>
<td class="px-4 py-3 text-sm text-gray-900">Sprint 2</td>
<td class="px-4 py-3 text-sm text-gray-900">30/06 - 13/07</td>
<td class="px-4 py-3 text-sm text-gray-900">38</td>
<td class="px-4 py-3 text-sm text-gray-900">40</td>
<td class="px-4 py-3 text-sm"><span class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800">105%</span></td>
<td class="px-4 py-3 text-sm font-medium"><button class="text-blue-600 hover:text-blue-900" onclick="editSprint('S2')">âœï¸ Editar</button></td>
</tr>
<tr>
<td class="px-4 py-3 text-sm text-gray-900">Sprint 3</td>
<td class="px-4 py-3 text-sm text-gray-900">14/07 - 27/07</td>
<td class="px-4 py-3 text-sm text-gray-900">42</td>
<td class="px-4 py-3 text-sm text-gray-900">38</td>
<td class="px-4 py-3 text-sm"><span class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800">90%</span></td>
<td class="px-4 py-3 text-sm font-medium"><button class="text-blue-600 hover:text-blue-900" onclick="editSprint('S3')">âœï¸ Editar</button></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
<div class="space-y-6">
<div class="bg-white border rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-3">InformaÃ§Ãµes do Projeto</h4>
<div class="space-y-2 text-sm">
<p><span class="font-medium">CoordenaÃ§Ã£o:</span> <span id="detailCoordenacao">CODES</span></p>
<p><span class="font-medium">ResponsÃ¡vel:</span> <span id="detailResponsavel">JoÃ£o Souza</span></p>
<p><span class="font-medium">Status:</span> <span id="detailStatus">Em Andamento</span></p>
<p><span class="font-medium">InÃ­cio:</span> <span id="detailInicio">15/06/2025</span></p>
<p><span class="font-medium">Fim Previsto:</span> <span id="detailFim">15/12/2025</span></p>
</div>
</div>
<div class="bg-white border rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-3">Equipe do Projeto</h4>
<div class="space-y-2 text-sm" id="detailEquipe"></div>
</div>
</div>
<div class="space-y-6">
<div class="bg-white border rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-3">OrÃ§amento</h4>
<div class="space-y-3">
<div class="flex justify-between items-center">
<span class="text-sm font-medium">OrÃ§amento Total:</span>
<span class="text-lg font-bold text-blue-600" id="detailOrcamento">R$ 180.000,00</span>
</div>
<div class="w-full bg-gray-200 rounded-full h-3">
<div class="bg-green-500 h-3 rounded-full" id="detailOrcamentoProgress" style="width: 92%"></div>
</div>
<div class="flex justify-between text-xs text-gray-600">
<span>Executado</span>
<span>DisponÃ­vel</span>
</div>
</div>
</div>
<div class="bg-white border rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-3">DescriÃ§Ã£o</h4>
<p class="text-sm text-gray-600" id="detailDescricao">Chatbot inteligente para atendimento automatizado
                  aos usuÃ¡rios.</p>
</div>
</div>
</div>
<div class="bg-white border rounded-lg p-4">
<h4 class="font-semibold text-gray-700 mb-3">Riscos e DependÃªncias</h4>
<div class="text-sm text-gray-600" id="detailRiscos">
<strong>Riscos:</strong> Nenhum risco identificado no momento.<br/>
<strong>DependÃªncias:</strong> AprovaÃ§Ã£o final da arquitetura de seguranÃ§a pelo time de infraestrutura.
            </div>
</div>
</div>
</div>
</div>
</div>
<!-- PDTI Action Modal -->
<div class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50" id="pdtiActionModal">
<div class="flex items-center justify-center min-h-screen p-4">
<div class="bg-white rounded-lg shadow-xl max-w-lg w-full">
<div class="p-6">
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-semibold text-gray-900">Nova AÃ§Ã£o PDTI</h3>
<button class="text-gray-400 hover:text-gray-600" onclick="hideModal('pdtiActionModal')">âœ•</button>
</div>
<form class="space-y-4" id="pdtiActionForm">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">ID da AÃ§Ã£o</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="pdtiActionId" placeholder="Ex: AC.SDF.46" required="" type="text"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">DescriÃ§Ã£o</label>
<textarea class="w-full border border-gray-300 rounded-lg px-3 py-2" id="pdtiActionDesc" placeholder="Descreva a aÃ§Ã£o..." required="" rows="3"></textarea>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">SituaÃ§Ã£o</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="pdtiActionSituacao" required="">
<option value="">Selecione...</option>
<option value="NÃ£o iniciada">NÃ£o Iniciada</option>
<option value="Em andamento">Em Andamento</option>
<option value="ConcluÃ­da">ConcluÃ­da</option>
<option value="-">Sem Status</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2" id="pdtiActionTipo" required="">
<option value="">Selecione...</option>
<option value="SDF">SoluÃ§Ãµes Digitais (SDF)</option>
<option value="SDD">SoluÃ§Ãµes de Dados (SDD)</option>
<option value="SDS">SoluÃ§Ãµes de Sistemas (SDS)</option>
</select>
</div>
<div class="flex justify-end space-x-3 pt-4">
<button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" onclick="hideModal('pdtiActionModal')" type="button">Cancelar</button>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" type="submit">Salvar
                AÃ§Ã£o</button>
</div>
</form>
</div>
</div>
</div>
</div>
<!-- Sprint Modal -->
<div class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50" id="sprintModal">
<div class="flex items-center justify-center min-h-screen p-4">
<div class="bg-white rounded-lg shadow-xl max-w-lg w-full">
<div class="p-6">
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-semibold text-gray-900">Nova Sprint</h3>
<button class="text-gray-400 hover:text-gray-600" onclick="hideModal('sprintModal')">âœ•</button>
</div>
<form class="space-y-4" id="sprintForm">
<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">NÃºmero da Sprint</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="sprintNumero" required="" type="number"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Capacidade</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="sprintCapacidade" required="" type="number"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Data de InÃ­cio</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="sprintInicio" required="" type="date"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Data de Fim</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="sprintFim" required="" type="date"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Itens Planejados</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="sprintPlanejado" required="" type="number"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Itens ConcluÃ­dos</label>
<input class="w-full border border-gray-300 rounded-lg px-3 py-2" id="sprintConcluido" required="" type="number"/>
</div>
</div>
<div class="flex justify-end space-x-3 pt-4">
<button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" onclick="hideModal('sprintModal')" type="button">Cancelar</button>
<button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700" type="submit">Salvar
                Sprint</button>
</div>
</form>
</div>
</div>
</div>
</div>
<footer class="text-center text-sm text-gray-600 py-6">
<p id="lastUpdate">Atualizado agora</p>
</footer>
<script>
    // === Mapeamento de posiÃ§Ã£o dos botÃµes do menu (para simular o clique correto)
    const NAV_INDEX = { home: 1, codes: 2, coset: 3, cgod: 4, pdti: 5 };
    function getNavButtonFor(page) {
      const idx = NAV_INDEX[page] || 1;
      return document.querySelector(`nav .nav-btn:nth-child(${idx})`);
    }

    // === Tabela base usada pelos cards/indicadores para filtrar
    const tableProjects = {


      'Sistema de Monitoramento': {
        coordenacao: 'CODES',
        status: 'Em Risco',
        rag: 'Vermelho',
        progresso: 66,
        sprints: '8 de 15',
        responsavel: 'Carlos Santos',
        categorias: ['ativos', 'desenvolvimento', 'fora-prazo']
      },
      'API Gateway': {
        coordenacao: 'CODES',
        status: 'SustentaÃ§Ã£o',
        rag: 'Verde',
        progresso: 100,
        sprints: '12 de 12',
        responsavel: 'Ana Costa',
        categorias: ['ativos', 'sustentacao']
      },
      'Portal de ServiÃ§os': {
        coordenacao: 'COSET',
        status: 'Em Andamento',
        rag: 'Amarelo',
        progresso: 75,
        sprints: '-',
        responsavel: 'Maria Silva',
        categorias: ['sistemas-integrados', 'modernizacao', 'integracao']
      },
      'Sistema ERP': {
        coordenacao: 'COSET',
        status: 'SustentaÃ§Ã£o',
        rag: 'Verde',
        progresso: 100,
        sprints: '-',
        responsavel: 'Pedro Lima',
        categorias: ['sistemas-integrados', 'infraestrutura']
      },
      'CatÃ¡logo de Metadados': {
        coordenacao: 'CGOD',
        status: 'Planejado',
        rag: 'Verde',
        progresso: 15,
        sprints: '-',
        responsavel: 'Ana Lima',
        categorias: ['catalogos', 'datalake']
      },
      'Dashboard Executivo': {
        coordenacao: 'CGOD',
        status: 'ConcluÃ­do',
        rag: 'Verde',
        progresso: 100,
        sprints: '-',
        responsavel: 'Fernanda Costa',
        categorias: ['analytics']
      }
    };

    // === Helpers de classe (badges)
    function getStatusBadgeClass(status) {
      switch (status) {
        case 'Em Andamento': return 'bg-green-100 text-green-800';
        case 'Em Risco': return 'bg-red-100 text-red-800';
        case 'SustentaÃ§Ã£o': return 'bg-yellow-100 text-yellow-800';
        case 'ConcluÃ­do': return 'bg-blue-100 text-blue-800';
        case 'Planejado': return 'bg-gray-100 text-gray-800';
        default: return 'bg-gray-100 text-gray-800';
      }
    }
    function getRagClass(rag) {
      switch (rag) {
        case 'Verde': return 'rag-verde';
        case 'Amarelo': return 'rag-amarelo';
        case 'Vermelho': return 'rag-vermelho';
        default: return 'rag-verde';
      }
    }

    // === Converte NOME -> ID (para chamar showProjectDetail/editProject corretos)
    function getProjectIdByName(name) {
      const id = Object.keys(projects).find(pid => projects[pid].nome === name);
      return id || null;
    }
    function showProjectDetailByName(name) {
      const id = getProjectIdByName(name);
      if (!id) return alert('Projeto nÃ£o encontrado!');
      showProjectDetail(id);
    }
    function editProjectByName(name) {
      const id = getProjectIdByName(name);
      if (!id) return alert('Projeto nÃ£o encontrado!');
      editProject(id);
    }

    // === Renderers de tabelas
    function renderCodesTable(filtered) {
      const tableBody = document.getElementById('codesTableBody');
      if (!tableBody) return;
      tableBody.innerHTML = '';

      if (filtered.length === 0) {
        tableBody.innerHTML = `<tr><td colspan="7" class="px-6 py-6 text-center text-sm text-gray-500">Nenhum projeto encontrado para esse filtro.</td></tr>`;
        return;
      }

      filtered.forEach(([name, p]) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${name}</div></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeClass(p.status)}">${p.status}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 text-xs font-semibold rounded text-white ${getRagClass(p.rag)}">${p.rag}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                <div class="h-2 rounded-full bg-blue-600" style="width:${p.progresso}%"></div>
              </div>
              <span class="text-sm text-gray-900">${p.progresso}%</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.sprints}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.responsavel}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button onclick="showProjectDetailByName('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">ğŸ‘ï¸ Ver</button>
            <button onclick="editProjectByName('${name}')" class="text-green-600 hover:text-green-900">âœï¸ Editar</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateCosetTable(filtered) {
      const tbody = document.querySelector('#cosetPage tbody');
      if (!tbody) return;
      tbody.innerHTML = '';

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="px-6 py-6 text-center text-sm text-gray-500">Nenhum projeto encontrado para esse filtro.</td></tr>`;
        return;
      }

      filtered.forEach(([name, p]) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${name}</div></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeClass(p.status)}">${p.status}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 text-xs font-semibold rounded text-white ${getRagClass(p.rag)}">${p.rag}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                <div class="h-2 rounded-full bg-blue-600" style="width:${p.progresso}%"></div>
              </div>
              <span class="text-sm text-gray-900">${p.progresso}%</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.responsavel}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button onclick="showProjectDetailByName('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">ğŸ‘ï¸ Ver</button>
            <button onclick="editProjectByName('${name}')" class="text-green-600 hover:text-green-900">âœï¸ Editar</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    function updateCgodTable(filtered) {
      const tbody = document.querySelector('#cgodPage tbody');
      if (!tbody) return;
      tbody.innerHTML = '';

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="px-6 py-6 text-center text-sm text-gray-500">Nenhum projeto encontrado para esse filtro.</td></tr>`;
        return;
      }

      filtered.forEach(([name, p]) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${name}</div></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeClass(p.status)}">${p.status}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 py-1 text-xs font-semibold rounded text-white ${getRagClass(p.rag)}">${p.rag}</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                <div class="h-2 rounded-full bg-blue-600" style="width:${p.progresso}%"></div>
              </div>
              <span class="text-sm text-gray-900">${p.progresso}%</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.responsavel}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button onclick="showProjectDetailByName('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">ğŸ‘ï¸ Ver</button>
            <button onclick="editProjectByName('${name}')" class="text-green-600 hover:text-green-900">âœï¸ Editar</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    // === Banner de filtro (para a pÃ¡gina CODES)
    function showCodesFilterBanner(categoria, count) {
      const tableView = document.getElementById('tableView');
      if (!tableView) return;
      const existing = tableView.querySelector('.bg-blue-50');
      if (existing) existing.remove();

      const label = categoria.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
      const info = document.createElement('div');
      info.className = 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4';
      info.innerHTML = `
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <span class="text-blue-600 mr-2">ğŸ”</span>
            <span class="text-blue-800 font-medium">Filtro ativo: ${label}</span>
            <span class="text-blue-600 ml-2">(${count} projeto${count !== 1 ? 's' : ''})</span>
          </div>
          <button onclick="clearFilter('codes')" class="text-blue-600 hover:text-blue-800 text-sm">âœ• Limpar filtro</button>
        </div>
      `;
      tableView.insertBefore(info, tableView.firstChild);
    }

    // === FILTRO PRINCIPAL (chamado pelos cards)
    function filterProjects(coordenacao, categoria) {
      const coord = (coordenacao || '').toLowerCase();
      const cat = (categoria || '').toLowerCase();

      // Navega para a pÃ¡gina certa clicando no botÃ£o do menu (garante highlight correto)
      const btn = getNavButtonFor(coord);
      if (btn) btn.click();
      else if (typeof showPage === 'function') showPage(coord);

      // Filtra
      const filtered = Object.entries(tableProjects).filter(([_, p]) =>
        p.coordenacao.toLowerCase() === coord && p.categorias.map(c => c.toLowerCase()).includes(cat)
      );

      // Renderiza na pÃ¡gina correspondente
      if (coord === 'codes') {
        renderCodesTable(filtered);
        showCodesFilterBanner(cat, filtered.length);
      } else if (coord === 'coset') {
        updateCosetTable(filtered);
      } else if (coord === 'cgod') {
        updateCgodTable(filtered);
      }
    }

    // === limpar filtro (CODES) - restaura 3 linhas padrÃ£o
    function clearFilter(coordenacao) {
      if ((coordenacao || '').toLowerCase() !== 'codes') return;
      const banner = document.querySelector('#tableView .bg-blue-50');
      if (banner) banner.remove();

      const defaultRows = ['Plataforma BIVBOT', 'Sistema de Monitoramento', 'API Gateway']
        .map(name => [name, tableProjects[name]]);
      renderCodesTable(defaultRows);
    }
  </script>
<script>
    // ---- Estado ----
    let currentProjectId = null;
    let isEditMode = false;

    const pdtiActions = {/* ... (mesmo objeto grande que vocÃª enviou) ... */ };

    const projects = {
      'P001': { nome: 'Portal de ServiÃ§os', tipo: 'Sistema Web', coordenacao: 'COSET', status: 'Em Andamento', prioridade: 'Alta', progresso: 75, totalSprints: 20, sprintsConcluidas: 15, responsavel: 'Maria Silva', inicio: '2024-01-15', fim: '2024-12-15', orcamento: 250000, descricao: 'Portal unificado para acesso aos serviÃ§os digitais da organizaÃ§Ã£o.', equipe: 'Maria Silva, JoÃ£o Santos, Ana Costa, Pedro Lima', rag: 'Amarelo', riscos: 'DependÃªncia de aprovaÃ§Ã£o de mudanÃ§as na arquitetura de seguranÃ§a.' },
      'P002': { nome: 'Plataforma BIVBOT', tipo: 'Chatbot IA', coordenacao: 'CODES', status: 'Em Andamento', prioridade: 'CrÃ­tica', progresso: 92, totalSprints: 30, sprintsConcluidas: 21, responsavel: 'JoÃ£o Souza', inicio: '2024-06-15', fim: '2024-12-15', orcamento: 180000, descricao: 'Chatbot inteligente para atendimento automatizado aos usuÃ¡rios.', equipe: 'JoÃ£o Souza, Carlos Santos, Ana Lima, Fernanda Costa', rag: 'Verde', riscos: 'Nenhum risco identificado no momento.' },
      'P003': { nome: 'CatÃ¡logo de Metadados', tipo: 'Sistema de Dados', coordenacao: 'CGOD', status: 'Planejado', prioridade: 'MÃ©dia', progresso: 15, totalSprints: 25, sprintsConcluidas: 3, responsavel: 'Ana Lima', inicio: '2024-08-01', fim: '2025-06-30', orcamento: 320000, descricao: 'Sistema para catalogaÃ§Ã£o e gestÃ£o de metadados organizacionais.', equipe: 'Ana Lima, Pedro Santos, Maria Costa', rag: 'Verde', riscos: 'Aguardando definiÃ§Ã£o de padrÃµes de metadados.' },
      'P004': { nome: 'Sistema de Monitoramento', tipo: 'Dashboard', coordenacao: 'CODES', status: 'Em Risco', prioridade: 'Alta', progresso: 66, totalSprints: 15, sprintsConcluidas: 8, responsavel: 'Carlos Santos', inicio: '2024-03-01', fim: '2024-11-30', orcamento: 150000, descricao: 'Sistema de monitoramento em tempo real dos serviÃ§os crÃ­ticos.', equipe: 'Carlos Santos, JoÃ£o Silva, Ana Costa', rag: 'Vermelho', riscos: 'Atraso na integraÃ§Ã£o com sistemas legados.' },
      'P005': { nome: 'Dashboard Executivo', tipo: 'BI Dashboard', coordenacao: 'CGOD', status: 'ConcluÃ­do', prioridade: 'Alta', progresso: 100, totalSprints: 18, sprintsConcluidas: 18, responsavel: 'Fernanda Costa', inicio: '2024-01-01', fim: '2024-08-31', orcamento: 200000, descricao: 'Dashboard executivo com indicadores estratÃ©gicos da organizaÃ§Ã£o.', equipe: 'Fernanda Costa, Ana Lima, Pedro Santos, Maria Silva', rag: 'Verde', riscos: 'Projeto concluÃ­do com sucesso.' },
      'P006': { nome: 'API Gateway', tipo: 'Infraestrutura', coordenacao: 'CODES', status: 'SustentaÃ§Ã£o', prioridade: 'CrÃ­tica', progresso: 100, totalSprints: 12, sprintsConcluidas: 12, responsavel: 'Ana Costa', inicio: '2023-09-01', fim: '2024-03-31', orcamento: 120000, descricao: 'Gateway centralizado para gerenciamento de APIs organizacionais.', equipe: 'Ana Costa, JoÃ£o Souza, Carlos Santos', rag: 'Verde', riscos: 'Em sustentaÃ§Ã£o - monitoramento contÃ­nuo necessÃ¡rio.' },
      'P007': { nome: 'Sistema ERP', tipo: 'Sistema Integrado', coordenacao: 'COSET', status: 'SustentaÃ§Ã£o', prioridade: 'CrÃ­tica', progresso: 100, totalSprints: 40, sprintsConcluidas: 40, responsavel: 'Pedro Lima', inicio: '2023-01-01', fim: '2024-06-30', orcamento: 500000, descricao: 'Sistema ERP integrado para gestÃ£o organizacional completa.', equipe: 'Pedro Lima, Maria Silva, JoÃ£o Santos, Ana Costa, Carlos Santos', rag: 'Verde', riscos: 'Sistema estÃ¡vel em produÃ§Ã£o.' }
    };

    // ---- NavegaÃ§Ã£o (âœ… sem usar event global) ----
    function showPage(pageId, el) {
      document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
      const target = document.getElementById(pageId + 'Page');
      if (target) target.classList.remove('hidden');

      document.querySelectorAll('nav .nav-btn').forEach(btn => {
        btn.classList.remove('border-blue-500', 'text-blue-600');
        btn.classList.add('border-transparent', 'text-gray-500');
      });
      if (el) {
        el.classList.remove('border-transparent', 'text-gray-500');
        el.classList.add('border-blue-500', 'text-blue-600');
      }

      if (pageId === 'home') setTimeout(createCharts, 100);
    }

    // ---- Modais ----
    function hideModal(id) { document.getElementById(id).classList.add('hidden'); }
    function showModal(id) {
      if (id === 'projectModal' && !isEditMode) {
        document.querySelector('#projectModal h3').textContent = 'Novo Projeto';
        document.getElementById('submitProjectBtn').textContent = 'Salvar Projeto';
        document.getElementById('projectForm').reset();
        const slider = document.getElementById('projectProgressoSlider');
        if (slider) { slider.value = 0; updateProgressDisplay(); }
      }
      document.getElementById(id).classList.remove('hidden');
    }

    // ---- Charts ----
    function createCharts() {
      const coord = document.getElementById('coordenacaoChart');
      if (coord) {
        new Chart(coord.getContext('2d'), {
          type: 'doughnut',
          data: { labels: ['CODES', 'COSET', 'CGOD'], datasets: [{ data: [3, 2, 2], backgroundColor: ['#3b82f6', '#8b5cf6', '#f97316'], borderWidth: 2, borderColor: '#ffffff' }] },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 15, usePointStyle: true, font: { size: 12 } } } }, cutout: '60%' }
        });
      }

      const status = document.getElementById('statusChart');
      if (status) {
        new Chart(status.getContext('2d'), {
          type: 'bar',
          data: { labels: ['Planejado', 'Em Andamento', 'Em Risco', 'ConcluÃ­do', 'SustentaÃ§Ã£o'], datasets: [{ label: 'Quantidade', data: [1, 2, 1, 1, 2], backgroundColor: ['#6b7280', '#16a34a', '#dc2626', '#2563eb', '#f59e0b'], borderRadius: 4, borderSkipped: false }] },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { stepSize: 1, font: { size: 11 } }, grid: { color: '#f3f4f6' } }, x: { ticks: { font: { size: 11 } }, grid: { display: false } } }, layout: { padding: { top: 10 } } }
        });
      }
    }

    // ---- Utils ----
    function formatDate(s) { if (!s) return '-'; return new Date(s).toLocaleDateString('pt-BR'); }
    function formatCurrency(v) { if (!v) return 'R$ 0,00'; return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(v); }
    function updateLastUpdateTime() {
      const now = new Date();
      document.getElementById('lastUpdate').textContent = `Hoje, ${now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}`;
    }

    // ---- Helper: buscar por ID ou Nome (âœ… corrige cliques que passam nome) ----
    function getProjectByIdOrName(keyOrName) {
      if (projects[keyOrName]) return { id: keyOrName, data: projects[keyOrName] };
      const entry = Object.entries(projects).find(([id, p]) => p.nome === keyOrName);
      return entry ? { id: entry[0], data: entry[1] } : null;
    }

    // ---- Detalhe Projeto ----
    function showProjectDetail(projectKeyOrName) {
      currentProjectId = null;
      const match = getProjectByIdOrName(projectKeyOrName);
      if (!match) { alert('Projeto nÃ£o encontrado!'); return; }
      const { id, data: project } = match;
      currentProjectId = id;

      document.getElementById('detailProjectName').textContent = project.nome;
      document.getElementById('detailProjectType').textContent = `${project.tipo} â€¢ ${project.coordenacao}`;

      const rag = document.getElementById('detailRagStatus');
      rag.textContent = project.rag;
      rag.className = `w-full h-8 rounded flex items-center justify-center text-white font-medium rag-${project.rag.toLowerCase()}`;

      const prio = document.getElementById('detailPrioridade');
      prio.textContent = project.prioridade;
      const prioClass = { 'Baixa': 'bg-green-500', 'MÃ©dia': 'bg-yellow-500', 'Alta': 'bg-orange-500', 'CrÃ­tica': 'bg-red-500' }[project.prioridade] || 'bg-gray-500';
      prio.className = `w-full h-8 rounded flex items-center justify-center text-white font-medium ${prioClass}`;

      document.getElementById('detailProgress').style.width = `${project.progresso}%`;
      document.getElementById('detailProgressText').textContent = `${project.progresso}%`;
      document.getElementById('detailSprints').textContent = `${project.sprintsConcluidas} de ${project.totalSprints}`;

      document.getElementById('detailCoordenacao').textContent = project.coordenacao;
      document.getElementById('detailResponsavel').textContent = project.responsavel;
      document.getElementById('detailStatus').textContent = project.status;
      document.getElementById('detailInicio').textContent = formatDate(project.inicio);
      document.getElementById('detailFim').textContent = formatDate(project.fim);

      document.getElementById('detailDescricao').textContent = project.descricao || 'Nenhuma descriÃ§Ã£o disponÃ­vel.';

      const equipeEl = document.getElementById('detailEquipe');
      equipeEl.innerHTML = '';
      if (project.equipe) {
        const cores = ['bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-pink-500'];
        project.equipe.split(',').map(s => s.trim()).forEach((m, idx) => {
          const div = document.createElement('div');
          div.className = 'flex items-center';
          div.innerHTML = `<span class="w-2 h-2 ${cores[idx % cores.length]} rounded-full mr-2"></span><span>${m}${idx === 0 ? ' (LÃ­der)' : ''}</span>`;
          equipeEl.appendChild(div);
        });
      }

      document.getElementById('detailOrcamento').textContent = formatCurrency(project.orcamento);
      document.getElementById('detailOrcamentoProgress').style.width = `${project.progresso}%`;

      document.getElementById('detailRiscos').innerHTML = `<strong>Riscos:</strong> ${project.riscos || 'Nenhum risco identificado.'}<br><strong>DependÃªncias:</strong> AprovaÃ§Ã£o final da arquitetura de seguranÃ§a pelo time de infraestrutura.`;

      showModal('projectDetailModal');
    }

    // ---- Progresso (slider) ----
    function updateProgressDisplay() {
      const slider = document.getElementById('projectProgressoSlider');
      const display = document.getElementById('progressDisplay');
      const input = document.getElementById('projectProgresso');
      const bar = document.getElementById('progressBar');
      const value = Number(slider.value) || 0;
      display.textContent = value + '%';
      input.value = value;
      bar.style.width = value + '%';
      const pct = (value / slider.max) * 100;
      slider.style.background = `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${pct}%, #e5e7eb ${pct}%, #e5e7eb 100%)`;
    }
    function updateProgressSlider() {
      const input = document.getElementById('projectProgresso');
      const slider = document.getElementById('projectProgressoSlider');
      const display = document.getElementById('progressDisplay');
      const bar = document.getElementById('progressBar');
      let value = parseInt(input.value) || 0; if (value < 0) value = 0; if (value > 100) value = 100;
      input.value = value; slider.value = value; display.textContent = value + '%'; bar.style.width = value + '%';
      const pct = (value / slider.max) * 100;
      slider.style.background = `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${pct}%, #e5e7eb ${pct}%, #e5e7eb 100%)`;
    }

    // ---- Form Projeto ----
    document.addEventListener('DOMContentLoaded', () => {
      const pf = document.getElementById('projectForm');
      const sf = document.getElementById('sprintForm');
      pf.addEventListener('submit', function (e) {
        e.preventDefault();
        const data = {
          nome: document.getElementById('projectName').value,
          tipo: document.getElementById('projectTipo').value,
          coordenacao: document.getElementById('projectCoord').value,
          status: document.getElementById('projectStatus').value,
          prioridade: document.getElementById('projectPrioridade').value,
          progresso: parseInt(document.getElementById('projectProgresso').value) || 0,
          totalSprints: parseInt(document.getElementById('projectTotalSprints').value) || 0,
          sprintsConcluidas: parseInt(document.getElementById('projectSprintsConcluidas').value) || 0,
          responsavel: document.getElementById('projectResponsavel').value,
          inicio: document.getElementById('projectInicio').value,
          fim: document.getElementById('projectFim').value,
          orcamento: parseFloat(document.getElementById('projectOrcamento').value) || 0,
          descricao: document.getElementById('projectDescricao').value,
          equipe: document.getElementById('projectEquipe').value,
          rag: document.getElementById('projectRag').value,
          riscos: document.getElementById('projectRisco').value
        };
        if (isEditMode && currentProjectId) {
          projects[currentProjectId] = data;
          alert('Projeto atualizado com sucesso!');
        } else {
          const newId = 'P' + String(Object.keys(projects).length + 1).padStart(3, '0');
          projects[newId] = data;
          alert('Projeto criado com sucesso!');
        }
        hideModal('projectModal');
        this.reset();
        isEditMode = false;
        currentProjectId = null;
        updateLastUpdateTime();
      });

      sf.addEventListener('submit', function (e) {
        e.preventDefault();
        alert('Sprint criada com sucesso!');
        hideModal('sprintModal');
        this.reset();
      });
    });

    // ---- Filtros/Export placeholders (mantidos) ----
    function sortTable(column) { alert('Funcionalidade de ordenaÃ§Ã£o serÃ¡ implementada'); }
    function exportData(fmt) { if (fmt === 'csv') { alert('ExportaÃ§Ã£o CSV serÃ¡ implementada'); } else if (fmt === 'pdf') { alert('ExportaÃ§Ã£o PDF serÃ¡ implementada'); } }
    function editSprint(id) { alert('Funcionalidade de ediÃ§Ã£o de sprint serÃ¡ implementada'); }

    // ---- Editar Projeto (âœ… aceita ID ou Nome) ----
    function editProject(projectKeyOrName) {
      const match = getProjectByIdOrName(projectKeyOrName);
      if (!match) { alert('Projeto nÃ£o encontrado!'); return; }
      const { id, data: project } = match;
      currentProjectId = id;
      isEditMode = true;

      document.getElementById('projectName').value = project.nome;
      document.getElementById('projectTipo').value = project.tipo;
      document.getElementById('projectCoord').value = project.coordenacao;
      document.getElementById('projectStatus').value = project.status;
      document.getElementById('projectPrioridade').value = project.prioridade;
      document.getElementById('projectProgresso').value = project.progresso;
      document.getElementById('projectProgressoSlider').value = project.progresso;
      updateProgressDisplay();
      document.getElementById('projectTotalSprints').value = project.totalSprints;
      document.getElementById('projectSprintsConcluidas').value = project.sprintsConcluidas;
      document.getElementById('projectResponsavel').value = project.responsavel;
      document.getElementById('projectInicio').value = project.inicio;
      document.getElementById('projectFim').value = project.fim;
      document.getElementById('projectOrcamento').value = project.orcamento;
      document.getElementById('projectDescricao').value = project.descricao;
      document.getElementById('projectEquipe').value = project.equipe;
      document.getElementById('projectRag').value = project.rag;
      document.getElementById('projectRisco').value = project.riscos;

      document.querySelector('#projectModal h3').textContent = 'Editar Projeto';
      document.getElementById('submitProjectBtn').textContent = 'Atualizar Projeto';

      hideModal('projectDetailModal');
      showModal('projectModal');
    }

    // ---- PDTI (mesmo comportamento do seu cÃ³digo) ----
    function loadPDTITable() { /* ... seu cÃ³digo original ... */ }
    function filterPDTI() { /* ... */ }
    function showPDTIFilterInfo(count) { /* ... */ }
    function hidePDTIFilterInfo() { /* ... */ }
    function clearPDTIFilters() { document.getElementById('pdtiStatusFilter').value = ''; document.getElementById('pdtiTipoFilter').value = ''; document.getElementById('pdtiSearchFilter').value = ''; hidePDTIFilterInfo(); loadPDTITable(); }
    function sortPDTI(col) { alert(`OrdenaÃ§Ã£o por ${col} serÃ¡ implementada`); }
    function editPDTIAction(actionId) { /* ... */ }
    function deletePDTIAction(actionId) { if (confirm('Tem certeza que deseja excluir esta aÃ§Ã£o?')) { delete pdtiActions[actionId]; loadPDTITable(); updatePDTIKPIs(); alert('AÃ§Ã£o excluÃ­da com sucesso!'); } }
    function exportPDTI(format) { if (format === 'excel') { alert('ExportaÃ§Ã£o para Excel serÃ¡ implementada'); } }
    function updatePDTIKPIs() { /* ... */ }

    document.addEventListener('DOMContentLoaded', function () {
      setTimeout(createCharts, 100);
      updateLastUpdateTime();
      loadPDTITable && loadPDTITable();
      updatePDTIKPIs && updatePDTIKPIs();

      // â­â­ ADICIONE ESTAS LINHAS â­â­
      updateProjectCounts();
      updateCodesKPIs();

      // garante que a Home apareÃ§a com botÃ£o ativo ao carregar
      const firstBtn = document.querySelector('nav .nav-btn:first-child');
      showPage('home', firstBtn);
    });
  </script>
<script>
    // === FunÃ§Ã£o para contar projetos por coordenaÃ§Ã£o ===
    function updateProjectCounts() {
      // Contar projetos totais
      const totalProjetos = Object.keys(projects).length;
      document.getElementById('totalProjetos').textContent = totalProjetos;

      // Contar projetos por coordenaÃ§Ã£o
      const projetosCodes = Object.values(projects).filter(p => p.coordenacao === 'CODES').length;
      const projetosCoset = Object.values(projects).filter(p => p.coordenacao === 'COSET').length;
      const projetosCgod = Object.values(projects).filter(p => p.coordenacao === 'CGOD').length;

      document.getElementById('projetosCodes').textContent = projetosCodes;
      document.getElementById('projetosCoset').textContent = projetosCoset;
      document.getElementById('projetosCgod').textContent = projetosCgod;

      // Atualizar tambÃ©m os cards de detalhamento por coordenaÃ§Ã£o
      updateCoordinationDetailCards();
    }

    // === FunÃ§Ã£o para atualizar os cards de detalhamento por coordenaÃ§Ã£o ===
    function updateCoordinationDetailCards() {
      // CODES - Em Desenvolvimento
      const codesDesenvolvimento = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'Em Andamento'
      ).length;
      const desenvolvimentoSpan = document.querySelector('[onclick*="filterProjects(\'codes\', \'desenvolvimento\')"] span');
      if (desenvolvimentoSpan) desenvolvimentoSpan.textContent = codesDesenvolvimento;

      // CODES - Em SustentaÃ§Ã£o
      const codesSustentacao = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'SustentaÃ§Ã£o'
      ).length;
      const sustentacaoSpan = document.querySelector('[onclick*="filterProjects(\'codes\', \'sustentacao\')"] span');
      if (sustentacaoSpan) sustentacaoSpan.textContent = codesSustentacao;

      // COSET - Infraestrutura
      const cosetInfraestrutura = Object.values(projects).filter(p =>
        p.coordenacao === 'COSET' && p.tipo === 'Infraestrutura'
      ).length;
      const infraestruturaSpan = document.querySelector('[onclick*="filterProjects(\'coset\', \'infraestrutura\')"] span');
      if (infraestruturaSpan) infraestruturaSpan.textContent = cosetInfraestrutura;

      // COSET - IntegraÃ§Ã£o
      const cosetIntegracao = Object.values(projects).filter(p =>
        p.coordenacao === 'COSET' && p.tipo === 'Sistema Integrado'
      ).length;
      const integracaoSpan = document.querySelector('[onclick*="filterProjects(\'coset\', \'integracao\')"] span');
      if (integracaoSpan) integracaoSpan.textContent = cosetIntegracao;

      // CGOD - Analytics
      const cgodAnalytics = Object.values(projects).filter(p =>
        p.coordenacao === 'CGOD' && p.tipo === 'BI Dashboard'
      ).length;
      const analyticsSpan = document.querySelector('[onclick*="filterProjects(\'cgod\', \'analytics\')"] span');
      if (analyticsSpan) analyticsSpan.textContent = cgodAnalytics;

      // CGOD - Data Lake
      const cgodDatalake = Object.values(projects).filter(p =>
        p.coordenacao === 'CGOD' && p.tipo === 'Sistema de Dados'
      ).length;
      const datalakeSpan = document.querySelector('[onclick*="filterProjects(\'cgod\', \'datalake\')"] span');
      if (datalakeSpan) datalakeSpan.textContent = cgodDatalake;
    }

    // === Atualizar tambÃ©m os KPIs das pÃ¡ginas individuais ===
    function updateCodesKPIs() {
      const codesAtivos = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && (p.status === 'Em Andamento' || p.status === 'SustentaÃ§Ã£o')
      ).length;

      const codesDesenvolvimento = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'Em Andamento'
      ).length;

      const codesSustentacao = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.status === 'SustentaÃ§Ã£o'
      ).length;

      const codesForaPrazo = Object.values(projects).filter(p =>
        p.coordenacao === 'CODES' && p.rag === 'Vermelho'
      ).length;

      // Atualizar os cards da pÃ¡gina CODES
      const codesCards = document.querySelectorAll('#codesPage .bg-white.rounded-lg.shadow-md.p-6');
      if (codesCards.length >= 4) {
        codesCards[0].querySelector('.text-2xl').textContent = codesAtivos;
        codesCards[1].querySelector('.text-2xl').textContent = codesDesenvolvimento;
        codesCards[2].querySelector('.text-2xl').textContent = codesSustentacao;
        codesCards[3].querySelector('.text-2xl').textContent = codesForaPrazo;
      }
    }

    // ---- Charts ----
    function createCharts() {
      // Contar projetos por coordenaÃ§Ã£o para o grÃ¡fico
      const codesCount = Object.values(projects).filter(p => p.coordenacao === 'CODES').length;
      const cosetCount = Object.values(projects).filter(p => p.coordenacao === 'COSET').length;
      const cgodCount = Object.values(projects).filter(p => p.coordenacao === 'CGOD').length;

      const coord = document.getElementById('coordenacaoChart');
      if (coord) {
        new Chart(coord.getContext('2d'), {
          type: 'doughnut',
          data: {
            labels: ['CODES', 'COSET', 'CGOD'],
            datasets: [{
              data: [codesCount, cosetCount, cgodCount],
              backgroundColor: ['#3b82f6', '#8b5cf6', '#f97316'],
              borderWidth: 2,
              borderColor: '#ffffff'
            }]
          },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 15, usePointStyle: true, font: { size: 12 } } } }, cutout: '60%' }
        });
      }

      // Contar projetos por status para o grÃ¡fico
      const statusCounts = {
        'Planejado': Object.values(projects).filter(p => p.status === 'Planejado').length,
        'Em Andamento': Object.values(projects).filter(p => p.status === 'Em Andamento').length,
        'Em Risco': Object.values(projects).filter(p => p.status === 'Em Risco').length,
        'ConcluÃ­do': Object.values(projects).filter(p => p.status === 'ConcluÃ­do').length,
        'SustentaÃ§Ã£o': Object.values(projects).filter(p => p.status === 'SustentaÃ§Ã£o').length
      };

      const status = document.getElementById('statusChart');
      if (status) {
        new Chart(status.getContext('2d'), {
          type: 'bar',
          data: {
            labels: ['Planejado', 'Em Andamento', 'Em Risco', 'ConcluÃ­do', 'SustentaÃ§Ã£o'],
            datasets: [{
              label: 'Quantidade',
              data: [
                statusCounts['Planejado'],
                statusCounts['Em Andamento'],
                statusCounts['Em Risco'],
                statusCounts['ConcluÃ­do'],
                statusCounts['SustentaÃ§Ã£o']
              ],
              backgroundColor: ['#6b7280', '#16a34a', '#dc2626', '#2563eb', '#f59e0b'],
              borderRadius: 4,
              borderSkipped: false
            }]
          },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { stepSize: 1, font: { size: 11 } }, grid: { color: '#f3f4f6' } }, x: { ticks: { font: { size: 11 } }, grid: { display: false } } }, layout: { padding: { top: 10 } } }
        });
      }
    }
  </script>
</body>
</html>